import{g as s,h as B,o as I,f as x,j as C,_ as L,G as k,l as N,m as u,b as d,z as U,a as A,y as E}from"./index-58934414.js";import{_ as F}from"./CHeaderBar-54785921.js";import{_ as z}from"./CCard-167a5880.js";import{_ as G}from"./CButton-4e52f6ba.js";import{_ as q}from"./CTable-23a0b448.js";import{s as J}from"./filterSituacion-3df5507d.js";const K={class:"selected-options"},O={class:"information__section"},Q=d("span",{class:"card-title"},"Tasa de ocupación",-1),W=d("span",null," Tasa de ocupación total de penitenciarías en contraste con población imputada. ",-1),X={class:"content__section"},Y=3,ce={__name:"poblacionImputados",setup(Z){const a=J(),y=s("Estado situación carcelaria / Tasa de ocupación imputados Vs Total"),l=s(!1),p=s(),m=s([]),h=s([{description:"Centro penitenciario",colspan:1},{description:"Imputados",colspan:3},{description:"Total PPL. 24h",colspan:3},{description:"Capacidad según diseño (Incluye 24 hrs y juveniles)",colspan:3},{description:"% Uso capacidad total",colspan:3},{description:"% Uso imputado",colspan:3}]),P=s([{rowReference:"establecimiento",description:""},{rowReference:"imputadoHombre",description:"Hombre"},{rowReference:"imputadoMujer",description:"Mujer"},{rowReference:"imputadoTotal",description:"Total"},{rowReference:"totalPplHombre",description:"Hombre"},{rowReference:"totalPplMujer",description:"Mujer"},{rowReference:"totalPplTotal",description:"Total"},{rowReference:"capacidadHombre",description:"Hombre"},{rowReference:"capacidadMujer",description:"Mujer"},{rowReference:"capacidadTotal",description:"Total"},{rowReference:"usoCapacidadHombre",description:"Hombre"},{rowReference:"usoCapacidadMujer",description:"Mujer"},{rowReference:"usoCapacidadTotal",description:"Total"},{rowReference:"usoImputadoHombre",description:"Hombre"},{rowReference:"usoImputadoMujer",description:"Mujer"},{rowReference:"usoImputadoTotal",description:"Total"}]),f=s([]),c=e=>e?Math.round(e*100)/100:0,n=e=>e<85?"class-verde":e>85&&e<99?"class-ambar":"class-rojo",V=e=>{const o=a.listadoCarceles.value.find(S=>S.id===e.carcelId),r=e.imputadoHombre+e.condenadoHombre+e.procesadoHombre+e.detenidoHombre,t=e.imputadoMujer+e.condenadoMujer+e.procesadoMujer+e.detenidoMujer,b=r+t,j=e.imputadoHombre+e.imputadoMujer,i=e.pplMaxMujer+e.pplMaxHombre,H=r&&e.pplMaxHombre?c(r*100/e.pplMaxHombre):0,w=t&&e.pplMaxMujer?c(t*100/e.pplMaxMujer):0,T=b&&i?c(b*100/i):0,g=e.imputadoHombre&&e.pplMaxHombre?c(e.imputadoHombre*100/e.pplMaxHombre):0,R=e.imputadoMujer&&e.pplMaxMujer?c(e.imputadoMujer*100/e.pplMaxMujer):0,v=j&&i?c(j*100/i):0;if(o&&(o!=null&&o.id))return{carcelId:o.id,establecimiento:o.description,imputadoHombre:e.imputadoHombre,imputadoMujer:e.imputadoMujer,imputadoTotal:e.imputadoHombre+e.imputadoMujer,totalPplHombre:r,totalPplMujer:t,totalPplTotal:r+t,capacidadHombre:e.pplMaxHombre,capacidadMujer:e.pplMaxMujer,capacidadTotal:i,usoCapacidadHombre:{data:H+"%",class:n(H)},usoCapacidadMujer:{data:w+"%",class:n(w)},usoCapacidadTotal:{data:T+"%",class:n(T)},usoImputadoHombre:{data:g+"%",class:n(g)},usoImputadoMujer:{data:R+"%",class:n(R)},usoImputadoTotal:{data:v+"%",class:n(v)}}},D=async()=>{a.changeRegionSelected(p.value),await M(),await _()},$=async e=>{if(!a.listadoRegiones.length>0){let o=await k();m.value=o,a.setRegionesList(o)}},M=async()=>{const e={regionId:a.regionSelected.id};let o=await E(e);a.setCarcelesList(o)},_=async()=>{var e;try{if((e=a==null?void 0:a.regionSelected)!=null&&e.id){const o={year:2022,month:12,regionId:a.regionSelected.id,embedPopulation:!0};await M();let r=await N(o);f.value=r.items.map(t=>V(t)).filter(t=>t==null?void 0:t.carcelId)}}catch(o){console.log(o)}};return B(async()=>{p.value=a.regionSelected,await $(),await _(),l.value=!0}),(e,o)=>(I(),x(L,null,{default:C(()=>[u(F,{title:y.value,"section-value":Y},null,8,["title"]),d("div",K,[l.value?(I(),x(U,{key:0,options:m.value,modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=r=>p.value=r)},null,8,["options","modelValue"])):A("",!0),u(G,{title:"Buscar",onExecuteAction:o[1]||(o[1]=r=>D())})]),d("div",O,[u(z,{class:"card-information"},{default:C(()=>[Q,W]),_:1})]),d("div",X,[u(q,{"parent-columns":h.value,columns:P.value,rows:f.value},null,8,["parent-columns","columns","rows"])])]),_:1}))}};export{ce as default};
