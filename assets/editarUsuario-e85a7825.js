import{g as s,h as R,y as S,x as $,o as d,f as m,j as E,_ as h,m as y,n as N,b as A,a as p,w as U,v as V,c as w,C as b}from"./index-f3eb65f5.js";import{_ as L}from"./CHeaderBar-47a90cd1.js";import{_ as M}from"./CButton-184dffc5.js";import{C as T}from"./CSearch-de0f006d.js";import{b as j,g as G}from"./user-d5901340.js";const q={class:"section-form"},z=99,F="Editar usuario",X={__name:"editarUsuario",setup(H){const r=s(!1),I=s("Editar usuario"),u=s(null),n=s(null),i=s(null),o=s(null),a=s(null),v=s(null),f=s([{id:3,description:"Director nacional",baseRestriction:{id:4}},{id:4,description:"Director regional",baseRestriction:{id:4}},{id:5,description:"Alcaide",baseRestriction:{id:4}},{id:2,description:"Gestor",baseRestriction:{id:6}}]),g=s([]),k=s([]),c=s(null),B=async()=>{let t=!1;const e=f.value.find(_=>_.id=c.value),l={};if(o!=null&&o.value&&(o==null?void 0:o.value)!==u.value.name&&(t=!0,l.name=o.value),a!=null&&a.value&&v.value&&a.value===v.value)t=!0,l.password=a.value;else if(a!=null&&a.value&&v.value&&a.value!==v.value)return;if(e&&e.id!==u.value.roleId&&(t=!0,l.roleId=e.id,l.restrictions=[e.baseRestriction],n!=null&&n.value&&l.restrictions.push({typeId:2,value:n==null?void 0:n.value}),i!=null&&i.value&&l.restrictions.push({typeId:2,value:i==null?void 0:i.value})),t){const _=u.value.id;r.value=!0,await j({id:_,body:l}),x(!0),r.value=!1}},x=(t=!1)=>{o.value=null,a.value=null,v.value=null,c.value=null,n.value=null,i.value=null,t&&(u.value=null)},C=async t=>(x(),await G({name:t})),D=()=>{o.value=u.value.name;const t=f.value.find(e=>e.id===u.value.roleId);c.value=t};return R(async()=>{g.value=await S(),k.value=await $()}),(t,e)=>(d(),m(h,{class:"admin-content"},{default:E(()=>[y(L,{title:I.value,"section-value":z},null,8,["title"]),y(N,{"active-spin":r.value},null,8,["active-spin"]),A("div",q,[r.value?p("",!0):(d(),m(T,{key:0,"async-options-promise":C,modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=l=>u.value=l),onChangeValue:D},null,8,["modelValue"])),r.value?p("",!0):U((d(),w("input",{key:1,class:"search__content--text","onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),placeholder:"Nombre usuario",type:"text"},null,512)),[[V,o.value]]),u.value&&!r.value?(d(),m(b,{key:2,options:f.value,modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=l=>c.value=l)},null,8,["options","modelValue"])):p("",!0),c.value===4?(d(),m(b,{key:3,options:k.value,modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=l=>n.value=l)},null,8,["options","modelValue"])):p("",!0),c.value===5?(d(),m(b,{key:4,options:g.value,modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=l=>i.value=l)},null,8,["options","modelValue"])):p("",!0),r.value?p("",!0):U((d(),w("input",{key:5,class:"search__content--text","onUpdate:modelValue":e[5]||(e[5]=l=>a.value=l),placeholder:"Nueva password",type:"password"},null,512)),[[V,a.value]]),r.value?p("",!0):U((d(),w("input",{key:6,class:"search__content--text","onUpdate:modelValue":e[6]||(e[6]=l=>v.value=l),placeholder:"Reingrese nueva password",type:"password"},null,512)),[[V,v.value]]),y(M,{title:F,onExecuteAction:B,disabled:t.blockButton},null,8,["disabled"])])]),_:1}))}};export{X as default};
