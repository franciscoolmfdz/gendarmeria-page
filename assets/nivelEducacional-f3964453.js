import{u as G,g as r,r as $,o as P,f as N,j as T,_ as J,m as v,n as K,b as _,a as Q,l as U}from"./index-c8938612.js";import{_ as Z}from"./CHeaderBar-52290071.js";import{_ as E}from"./CFilterbar-6e8993b2.js";import{_ as ee}from"./subSideNav-83b573e9.js";import{_ as te}from"./CCard-96aa4865.js";import{_ as ae}from"./CColunmChart-d78b7003.js";import"./CButton-1d70cd49.js";import"./CChartDonutSection-e94e3819.js";const oe={class:"chart-section-principal"},le={class:"section-nivel-educ"},ie={class:"chart-section"},se=_("span",{class:"card-title"},"Pregunta",-1),ne=_("span",{class:"question--value"},"3. ¿Hasta qué curso llegó (en la calle)?",-1),y=7,he={__name:"nivelEducacional",setup(re){const l=G(),n=r(!1),M=r("Antecedentes y trayectorias / Nivel educacional (en la calle)"),x=r(""),u=r([]),k=r({categories:["sin estudios formales","primero básico","segundo básico","tercero básico","cuarto básico","quinto básico","sexto básico","séptimo básico","octavo básico","I medio","II medio","III medio","IV medio completo","superior incompleta","superior completa","no asignado"],crosshair:!1}),q=r({min:0,allowDecimals:!1,title:{text:""}}),H=r({column:{pointPadding:.2,borderWidth:3}}),L=r({headerFormat:'<span style="font-size:10px">{point.key}%</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}%</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),O=e=>e?Math.round(e*100)/100:0,c=$([]),X=(e,i,o)=>$({id:e,name:i,data:o,dataLabels:{enabled:!0,color:"#000",align:"center",x:10,pointFormat:'<tr><td style="padding:0"><b>{point.y}%</b></td></tr>',style:{inside:!1,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),I=()=>{let e=u.value.reduce((i,o)=>i+o.pointCarcel,0);e=e/u.value.length,e=Math.round(O(e)),x.value=e.toString()},Y=async e=>{n.value=!0;const i=c.filter(o=>o.id!==e);c.splice(0,c.length),u.value=u.value.filter(o=>o.carcelId!==e),I(),i.map(o=>c.push(o)),await l.sleep(50),n.value=!1},z=(e,i)=>{let o=0,p=0,d=0,s=0,m=0,f=0,b=0,h=0,g=0,C=0,S=0,D=0,w=0,V=0,A=0,j=null,F=0,a=0;for(let t=0;t<e.length;t++)e[t].value===-1?j+=e[t].value*-1:(F+=e[t].value,a++),e[t].value===0&&o++,e[t].value===1&&p++,e[t].value===2&&d++,e[t].value===3&&s++,e[t].value===4&&m++,e[t].value===5&&f++,e[t].value===6&&b++,e[t].value===7&&h++,e[t].value===8&&g++,e[t].value===9&&C++,e[t].value===10&&S++,e[t].value===11&&D++,e[t].value===12&&w++,e[t].value===13&&V++,e[t].value===14&&A++;const R=[Math.round(o*100/a),Math.round(p*100/a),Math.round(d*100/a),Math.round(s*100/a),Math.round(m*100/a),Math.round(f*100/a),Math.round(b*100/a),Math.round(h*100/a),Math.round(g*100/a),Math.round(C*100/a),Math.round(S*100/a),Math.round(D*100/a),Math.round(w*100/a),Math.round(V*100/a),Math.round(A*90/a)];return u.value.push({carcelId:i,pointCarcel:Math.round(F/a)}),I(),R},B=async(e,i,o)=>{var p,d;try{let s=((p=l==null?void 0:l.penitenciaria)==null?void 0:p.id)??null,m=((d=l==null?void 0:l.penitenciaria)==null?void 0:d.description)??null,f=l.historyId;if(o&&(s=e,m=i),f&&s){n.value=!0;let h=await U({historyId:f,carcelId:s,categoryId:y,subCategoryId:23,embedDetail:!0,dimensionId:126});const g=z(h.items,s);c.push(X(s,m,g))}}catch(s){console.log(s)}finally{o||(n.value=!1)}},W=async()=>{n.value=!0,l.carcelesSelected&&l.carcelesSelected.length>0&&await Promise.all(l.carcelesSelected.map(async e=>await B(e.id,e.description,!0))),n.value=!1};return(e,i)=>(P(),N(J,null,{default:T(()=>[v(Z,{title:M.value,"section-value":y},null,8,["title"]),v(K,{"active-spin":n.value},null,8,["active-spin"]),v(E,{baseFilter:y,multipleDisabled:!1,onExecuteMount:W,onExecuteAction:B,onExecuteRemove:Y}),_("div",oe,[v(ee,{class:"ection-nivel-educacional",title:M.value,"section-value":y,pointValue:x.value,pointTitle:"3. Nivel educacional (en la calle)",pointSubtitle:"luna","point-type":3},null,8,["title","pointValue","pointTitle"]),_("div",le,[_("div",ie,[n.value?Q("",!0):(P(),N(ae,{key:0,chartType:"bar",optionsAxisX:k.value,optionsAxisY:q.value,plotOptions:H.value,tooltip:L.value,series:c},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),v(te,{class:"card-preguntas"},{default:T(()=>[se,ne]),_:1})])])]),_:1}))}};export{he as default};
