import{_ as D,r as u,s as E,i as V,h as O,o as i,c as d,a as g,j as K,q as A,x as y,F,k as N,m as p,y as P,z as $,t as j,n as z,A as M,B as U}from"./index-340de4af.js";/* empty css                                                                */const q=r=>(M("data-v-f124e5c8"),r=r(),U(),r),H={class:"c-search"},T={class:"search__content"},G=["onKeydown"],J={key:0,class:"search__content--results"},Q=["onClick"],R={key:0},W=z('<div class="search--spinner" data-v-f124e5c8><div class="preloader-wrapper small active" data-v-f124e5c8><div class="spinner-layer spinner-green-only" data-v-f124e5c8><div class="circle-clipper left" data-v-f124e5c8><div class="circle" data-v-f124e5c8></div></div><div class="gap-patch" data-v-f124e5c8><div class="circle" data-v-f124e5c8></div></div><div class="circle-clipper right" data-v-f124e5c8><div class="circle" data-v-f124e5c8></div></div></div></div></div>',1),X=[W],Y={key:1,class:"search__cleaner"},Z=q(()=>g("i",{class:"Small material-icons"},"clear",-1)),ee=[Z],te={__name:"CSearch",props:{options:{type:Array,default:null},asyncOptionsPromise:{type:Function,default:null},modelValue:{type:[String,Object],default:""},hideClearButton:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(r,{emit:h}){const n=r,S=e=>{const t=l=>{const c=l.target;!c||c===document.documentElement||c===document.body||c.closest(".c-search")||e()};V(()=>{document.addEventListener("click",t)}),P(()=>{document.removeEventListener("click",t)})},a=u(""),s=u([]),o=u(-1),f=u(!1),_=u(!0),w=e=>{s.value=n.options.filter(t=>(t.description||t).toLowerCase().includes(e.toLowerCase())),C()},B=async e=>{f.value=!0;try{const t=await n.asyncOptionsPromise(e);s.value=t,C()}catch(t){console.error(t)}f.value=!1},x=e=>{a.value=e.description||e,s.value=[],h("update:modelValue",e),v()},m=()=>{a.value="",s.value=[],h("update:modelValue",""),v()},I=async()=>{o.value=-1,a.value?n.asyncOptionsPromise?await B(a.value):w(a.value):m()},L=()=>{if(o.value!==-1&&s.value.length>0){const e=s.value[o.value];a.value=e.description||e,s.value=[],h("update:modelValue",e),v()}},b=E(()=>a.value!==""),k=e=>{s.value.length!==0&&(e==="down"?o.value=(o.value+1)%s.value.length:e==="up"&&(o.value=(o.value-1+s.value.length)%s.value.length))},v=()=>{_.value=!0},C=()=>{_.value=!1};return V(()=>{var e;S(v),n.modelValue&&(a.value=((e=n.modelValue)==null?void 0:e.description)||n.modelValue)}),O(()=>n.options,()=>{a.value?w(a.value):(s.value=[],m())}),O(()=>n.modelValue,e=>{a.value=e?e.description||e:""}),(e,t)=>(i(),d("div",H,[g("div",T,[K(g("input",{class:"search__content--text","onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l),placeholder:"buscar...",type:"text",onInput:I,onKeydown:[t[1]||(t[1]=y(l=>k("down"),["down"])),t[2]||(t[2]=y(l=>k("up"),["up"])),y(L,["enter"])]},null,40,G),[[A,a.value]]),_.value?p("",!0):(i(),d("ul",J,[(i(!0),d(F,null,N(s.value,(l,c)=>(i(),d("li",{key:c,class:$({active:c===o.value}),onClick:ae=>x(l)},j(l.description||l),11,Q))),128))]))]),f.value?(i(),d("div",R,X)):p("",!0),r.hideClearButton?p("",!0):(i(),d("div",Y,[b.value?(i(),d("button",{key:0,class:"search__cleaner--btn red teal lighten-5",onClick:m},ee)):p("",!0)]))]))}},ne=D(te,[["__scopeId","data-v-f124e5c8"]]);export{ne as C};
