import{u as B,g as i,r as T,o as w,f as E,j as F,_ as H,m as u,n as L,b as e,a as N,k as X}from"./index-dd4685c7.js";import{_ as Y}from"./subSideNav-9a521af5.js";import{_ as z}from"./CHeaderBar-a2769ce8.js";import{_ as R}from"./CFilterbar-c4e63675.js";import{_ as W}from"./CCard-68034043.js";import{_ as j}from"./CColunmChart-5fcf1a79.js";import"./CChartDonutSection-658d1a8e.js";import"./CButton-4bbc2b87.js";const U={class:"chart-section-principal"},G={class:"trato-funcionarios"},J={class:"chart-section"},K=e("span",{class:"card-title"},"Preguntas",-1),Q=e("span",{class:"question--value"},"5.1 Soy tratado con respeto por los funcionarios",-1),Z=e("span",{class:"question--value"},"5.2 He recibido tratos humillantes en esta cárcel",-1),ee=e("span",{class:"question--value"},"5.3 Soy tratado como un ser humano en esta cárcel",-1),te=e("span",{class:"question--value"},"5.4 En esta cárcel se abusa de los internos más débiles",-1),se=e("span",{class:"question--value"},"5.5 Me llevo bien con los gendarmes de mi módulo",-1),oe=e("span",{class:"question--value"},"5.6 Siento que los funcionarios confían en mí",-1),ae=e("span",{class:"question--value"},"5.7 En esta cárcel los funcionarios son honestos",-1),ne=e("span",{class:"question--value"},"5.8 En esta cárcel recibo apoyo del personal cuando lo necesito",-1),ie=e("span",{class:"question--value"},"5.9 En esta cárcel los gendarmes se preocupan por mí",-1),d=1,he={__name:"TratoFuncionarios",setup(le){const t=B(),o=i(!1),p=i("Calidad de vida de los internos / Trato con funcionario interno"),_=i(""),f=i(0),P=i({categories:["5.1","5.2","5.3","5.4","5.5","5.6","5.7"],crosshair:!1}),C=i({min:0,allowDecimals:!1,title:{text:"Escala de frecuencia"}}),D=i({column:{pointPadding:.2,borderWidth:3}}),I=i({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),l=T([]),V=(s,c,a)=>T({id:s,name:c,data:a,dataLabels:{enabled:!0,color:"#fff",align:"center",x:-15,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),$=async s=>{o.value=!0;const c=l.filter(a=>a.id!==s);l.splice(0,l.length),c.map(a=>l.push(a)),await t.sleep(50),o.value=!1},A=s=>s?Math.round(s*100)/100:0,m=async(s,c,a)=>{var v,h;try{let r=((v=t==null?void 0:t.penitenciaria)==null?void 0:v.id)??null,y=((h=t==null?void 0:t.penitenciaria)==null?void 0:h.description)??null,g=t.historyId;if(a&&(r=s,y=c),g&&r){o.value=!0;let M=await X({historyId:g,carcelId:r,categoryId:1,subCategoryId:5});const b=[];let x=0,S=M.filter(n=>n.poundUsed===1);S.map(n=>{const q=n!=null&&n.promPound?Math.round((n==null?void 0:n.promPound)*100)/100:0;x+=q,b.push(q)}),f.value+=x/S.length;let O=A(f.value/t.carcelesSelected.length);_.value=O.toString(),l.push(V(r,y,b))}}catch(r){console.log(r)}finally{a||(o.value=!1)}},k=async()=>{o.value=!0,t.carcelesSelected&&t.carcelesSelected.length>0&&await Promise.all(t.carcelesSelected.map(async s=>await m(s.id,s.description,!0))),o.value=!1};return(s,c)=>(w(),E(H,null,{default:F(()=>[u(z,{title:p.value,"section-value":d},null,8,["title"]),u(L,{"active-spin":o.value},null,8,["active-spin"]),u(R,{baseFilter:d,multipleDisabled:!1,onExecuteMount:k,onExecuteAction:m,onExecuteRemove:$}),e("div",U,[u(Y,{title:p.value,"section-value":d,pointValue:_.value,pointTitle:"Trato con funcionarios",pointSubtitle:"Promedio respuestas de trato con funcionarios"},null,8,["title","pointValue"]),e("div",G,[e("div",J,[o.value?N("",!0):(w(),E(j,{key:0,chartType:"bar",optionsAxisX:P.value,optionsAxisY:C.value,plotOptions:D.value,tooltip:I.value,series:l},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),u(W,{class:"card-preguntas"},{default:F(()=>[K,Q,Z,ee,te,se,oe,ae,ne,ie]),_:1})])])]),_:1}))}};export{he as default};
