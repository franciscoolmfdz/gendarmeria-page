import{g as o,h as b,o as _,f as R,j as h,_ as T,J as y,q as $,m as i,b as r,x as D,c as S,a as k,e as B}from"./index-415b29b2.js";import{_ as E}from"./subSideNav-be05d6d3.js";import{_ as x}from"./CHeaderBar-2fd75ce2.js";import{_ as v}from"./CButton-d4eccb18.js";import{_ as A}from"./CTable-bee6292e.js";import{s as C}from"./filterSituacion-01a7814e.js";import"./CChartDonutSection-41e4ecac.js";const j={class:"selected-options"},M={key:0,class:"c-option-volver"},N={class:"table-section-principal"},I={class:"content__section"},f=3,K={__name:"licencias",setup(P){const s=C(),a=o({id:15,description:"Región Metropolitana de Santiago"}),u=o(),d=o("Estado situación carcelaria / Licencias del personal"),m=o([{rowReference:"centro",description:"Establecimiento penal"},{rowReference:"tieneLicencia",description:"Licencia vigente"},{rowReference:"noLicenciaVigente",description:"Sin licencia vigente"},{rowReference:"licenciaTotal",description:"Totales"},{rowReference:"porcentajeLicencia",description:"% Licencias"}]),c=o([]),g=()=>{B.push("/situacionCarcelaria")},w=e=>e?`${Math.round(e*100)/100} %`:"0 %",p=async()=>{var e;try{if(a.value){const t={regionId:((e=a.value)==null?void 0:e.id)??a.value},l=await y(t);c.value=l.map(n=>{n.tieneLicencia=n.licenseActiveTotal,n.noLicenciaVigente=n.licenseDisabledTotal,n.licenciaTotal=n.licenseTotal;const L=n.licenseActiveTotal/n.licenseTotal*100;return n.porcentajeLicencia=w(L),n})}else c.value=[]}catch(t){console.log(t)}},V=async e=>{if(!s.listadoRegiones.length>0){let t=await $();u.value=t,s.setRegionesList(t)}};return b(async()=>{a.value=s.regionSelected,await V(),await p()}),(e,t)=>(_(),R(T,{class:"contenido-licencia"},{default:h(()=>[i(x,{title:d.value,"section-value":f},null,8,["title"]),r("div",j,[i(D,{class:"select-region",options:u.value,modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l)},null,8,["options","modelValue"]),i(v,{class:"btn-search",title:"",onExecuteAction:p})]),!e.activeSpin&&e.topPosition!==0?(_(),S("div",M,[i(v,{class:"btn-volver",title:"Volver",onExecuteAction:g,disabled:e.blockButton},null,8,["disabled"])])):k("",!0),r("div",N,[i(E,{class:"subsection-licencias",title:d.value,"section-value":f,pointValue:e.pointCalculated,pointTitle:"Dotación efectiva del personal",pointSubtitle:""},null,8,["title","pointValue"]),r("div",I,[i(A,{columns:m.value,rows:c.value},null,8,["columns","rows"])])])]),_:1}))}};export{K as default};
