import{_ as k}from"./CSpinner-da91c443.js";import{r,d as h,o as y,e as g,w as m,_ as L,b as p,a as c,f as N}from"./index-42b1f99d.js";import{_ as T}from"./CHeaderBar-4c7da320.js";import{u as V,_ as q,a as x}from"./CCard-6884ce7f.js";import{_ as B}from"./CColunmChart-bae8c89b.js";import{a as M}from"./dimensionHistory-b6bfb333.js";import"./exporting-4bd766b0.js";import"./api-7944baea.js";const O={class:"regimen-carcel"},X={class:"chart-section"},Y=c("span",{class:"card-title"},"P6 ¿Cuánto tiempo lleva en esta cárcel? ",-1),z=c("span",{class:"question--value"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam ",-1),H=c("span",{class:"card-title"},"Pregunta",-1),W=c("span",{class:"question--value"},"FP 6 ¿Cuánto tiempo lleva en esta cárcel? ",-1),f=7,se={__name:"tiempoEncierro",setup(J){const t=V(),n=r(!1),b=r("Trayectoria / ¿Cuánto tiempo lleva en esta cárcel?"),S=r({categories:["menos de 6 meses","entre 6 meses y 1 año","entre 1 y 2 años","más de 2 años","No asignado"],crosshair:!1}),w=r({min:0,allowDecimals:!1,title:{text:"Suma por categoría"}}),A=r({column:{pointPadding:.2,borderWidth:3}}),I=r({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),C=e=>{let o=0,s=0,u=0,d=0,i=0;for(let a=0;a<e.length;a++)e[a].value===1&&o++,e[a].value===2&&s++,e[a].value===3&&u++,e[a].value===4&&d++,e[a].value===-1&&(i+=e[a].value*-1);return[o,s,u,d,i]},l=h([]),F=(e,o,s)=>h({id:e,name:o,data:s,dataLabels:{enabled:!0,color:"#fff",align:"center",y:70,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),P=async e=>{n.value=!0;const o=l.filter(s=>s.id!==e);l.splice(0,l.length),o.map(s=>l.push(s)),await t.sleep(50),n.value=!1},_=async(e,o,s)=>{var u,d;try{let i=((u=t==null?void 0:t.penitenciaria)==null?void 0:u.id)??null,a=((d=t==null?void 0:t.penitenciaria)==null?void 0:d.description)??null,v=t.historyId;if(s&&(i=e,a=o),v&&i){n.value=!0;let D=await M({historyId:v,carcelId:i,categoryId:f,subCategoryId:23,embedDetail:!0,dimensionId:129});const E=C(D.items);l.push(F(i,a,E))}}catch(i){console.log(i)}finally{s||(n.value=!1)}},$=async()=>{n.value=!0,t.carcelesSelected&&t.carcelesSelected.length>0&&await Promise.all(t.carcelesSelected.map(async e=>await _(e.id,e.description,!0))),n.value=!1};return(e,o)=>(y(),g(L,null,{default:m(()=>[p(T,{title:b.value,"section-value":f},null,8,["title"]),p(k,{"active-spin":n.value},null,8,["active-spin"]),p(q,{baseFilter:f,multipleDisabled:!1,onExecuteMount:$,onExecuteAction:_,onExecuteRemove:P}),c("div",O,[c("div",X,[p(x,{class:"card-information"},{default:m(()=>[Y,z]),_:1}),n.value?N("",!0):(y(),g(B,{key:0,optionsAxisX:S.value,optionsAxisY:w.value,plotOptions:A.value,tooltip:I.value,series:l},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),p(x,{class:"card-preguntas"},{default:m(()=>[H,W]),_:1})])]),_:1}))}};export{se as default};
