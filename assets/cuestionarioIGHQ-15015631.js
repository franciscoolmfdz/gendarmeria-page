import{u as F,g as n,r as h,o as y,f as g,j as $,_ as P,m as p,n as Q,b as f,a as k,l as E}from"./index-68f8bedd.js";import{_ as N}from"./subSideNav-4b8b3248.js";import{_ as T}from"./CHeaderBar-15eb3a90.js";import{_ as B}from"./CFilterbar-b73af337.js";import"./CCard-428d3126.js";import{_ as L}from"./CColunmChart-8bdfd6bf.js";import"./CChartDonutSection-1bb06b2b.js";import"./CButton-40472355.js";const O={class:"chart-section-principal"},R={class:"cuestionario-ghq-funcionario"},X={class:"chart-section"},m=2,ee={__name:"cuestionarioIGHQ",setup(Y){const i=F(),s=n(!1),_=n("Calidad de vida de los funcionarios / Cuestionario de Salud GHQ-12 de Goldberg"),b=n("-");n(0);const x=n({categories:["Ausencia","Sospecha","Presencia","No asignado"],crosshair:!1}),S=n({min:0,allowDecimals:!1,title:{text:"Escala de frecuencia"}}),I=n({column:{pointPadding:.2,borderWidth:3}}),w=n({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b>%</td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),r=h([]),D=(e,o,a)=>h({id:e,name:o,data:a,dataLabels:{enabled:!0,color:"#fff",align:"center",x:-15,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),G=async e=>{s.value=!0;const o=r.filter(a=>a.id!==e);r.splice(0,r.length),o.map(a=>r.push(a)),await i.sleep(50),s.value=!1},C=e=>{let o=e[0].recordId,a=0,u=0,d=0,t=0;for(let c=0;c<e.length;c++){let l=e[c];l.recordId==o&&l.pound>=0?t+=l.pound:(t<2?a++:t>2&&t<=6?u++:t>6&&d++,t=l.pound,o=l.recordId)}return[a,u,d]},v=async(e,o,a)=>{var u,d;try{let t=((u=i==null?void 0:i.penitenciaria)==null?void 0:u.id)??null,c=((d=i==null?void 0:i.penitenciaria)==null?void 0:d.description)??null,l=i.historyId;if(a&&(t=e,c=o),l&&t){s.value=!0;let V=await E({historyId:l,carcelId:t,categoryId:2,subCategoryId:22,embedDetail:!0});const A=C(V.items);r.push(D(t,c,A))}}catch(t){console.log(t)}finally{a||(s.value=!1)}},H=async()=>{s.value=!0,i.carcelesSelected&&i.carcelesSelected.length>0&&await Promise.all(i.carcelesSelected.map(async e=>await v(e.id,e.description,!0))),s.value=!1};return(e,o)=>(y(),g(P,null,{default:$(()=>[p(T,{title:_.value,"section-value":m},null,8,["title"]),p(Q,{"active-spin":s.value},null,8,["active-spin"]),p(B,{baseFilter:m,multipleDisabled:!1,onExecuteMount:H,onExecuteAction:v,onExecuteRemove:G}),f("div",O,[p(N,{class:"subsection-funcionarios",title:_.value,"section-value":m,pointValue:b.value,pointTitle:"Cuestionario General de Salud GHQ-12 de Goldberg",pointSubtitle:"Promedio respuestas cuestionario General de Salud GHQ-12 de Goldberg"},null,8,["title","pointValue"]),f("div",R,[f("div",X,[s.value?k("",!0):(y(),g(L,{key:0,chartType:"bar",optionsAxisX:x.value,optionsAxisY:S.value,plotOptions:I.value,tooltip:w.value,series:r},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))])])])]),_:1}))}};export{ee as default};
