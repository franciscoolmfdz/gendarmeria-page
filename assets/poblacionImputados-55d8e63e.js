import{g as c,h as S,o as R,f as E,j as L,_ as A,q as N,l as U,m as l,b,x as q,c as F,a as z,e as G,C as J}from"./index-22e32733.js";import{_ as K}from"./subSideNav-03d27cc9.js";import{_ as O}from"./CHeaderBar-286bf8ed.js";import{_ as I}from"./CButton-1b43ba3e.js";import{_ as Q}from"./CTable-0fa27f9b.js";import{s as W}from"./filterSituacion-d5979899.js";import"./CChartDonutSection-695f227e.js";const X={class:"selected-options"},Y={key:0,class:"c-option-volver"},Z={class:"table-section-principal"},ee={class:"content__section"},f=3,oe=31,le={__name:"poblacionImputados",setup(ae){const t=W(),M=c("Estado situación carcelaria / Tasa de ocupación imputados Vs Total"),x=c(!1),n=c(),p=c([]),h=c(!1),y=c([{description:"Centro penitenciario",colspan:1},{description:"Imputados",colspan:3},{description:"Total PPL. 24h",colspan:3},{description:"Capacidad según diseño (Incluye 24 hrs y juveniles)",colspan:3},{description:"% Uso capacidad total",colspan:3},{description:"% Uso imputado",colspan:3}]),V=c([{rowReference:"establecimiento",description:""},{rowReference:"imputadoHombre",description:"Hombre"},{rowReference:"imputadoMujer",description:"Mujer"},{rowReference:"imputadoTotal",description:"Total"},{rowReference:"totalPplHombre",description:"Hombre"},{rowReference:"totalPplMujer",description:"Mujer"},{rowReference:"totalPplTotal",description:"Total"},{rowReference:"capacidadHombre",description:"Hombre"},{rowReference:"capacidadMujer",description:"Mujer"},{rowReference:"capacidadTotal",description:"Total"},{rowReference:"usoCapacidadHombre",description:"Hombre"},{rowReference:"usoCapacidadMujer",description:"Mujer"},{rowReference:"usoCapacidadTotal",description:"Total"},{rowReference:"usoImputadoHombre",description:"Hombre"},{rowReference:"usoImputadoMujer",description:"Mujer"},{rowReference:"usoImputadoTotal",description:"Total"}]),m=c([]),P=()=>{G.push("/situacionCarcelaria")},i=e=>e?Math.round(e*100)/100:0,d=e=>e<85?"class-verde":e>85&&e<99?"class-ambar":"class-rojo",D=e=>{const o=t.listadoCarceles.find(B=>B.id===e.carcelId),a=e.imputadoHombre+e.condenadoHombre+e.procesadoHombre+e.detenidoHombre,s=e.imputadoMujer+e.condenadoMujer+e.procesadoMujer+e.detenidoMujer,r=a+s,j=e.imputadoHombre+e.imputadoMujer,u=e.pplMaxMujer+e.pplMaxHombre,v=a&&e.pplMaxHombre?i(a*100/e.pplMaxHombre):0,H=s&&e.pplMaxMujer?i(s*100/e.pplMaxMujer):0,w=r&&u?i(r*100/u):0,T=e.imputadoHombre&&e.pplMaxHombre?i(e.imputadoHombre*100/e.pplMaxHombre):0,g=e.imputadoMujer&&e.pplMaxMujer?i(e.imputadoMujer*100/e.pplMaxMujer):0,C=j&&u?i(j*100/u):0;if(o&&(o!=null&&o.id))return{carcelId:o.id,establecimiento:o.description,imputadoHombre:e.imputadoHombre,imputadoMujer:e.imputadoMujer,imputadoTotal:e.imputadoHombre+e.imputadoMujer,totalPplHombre:a,totalPplMujer:s,totalPplTotal:a+s,capacidadHombre:e.pplMaxHombre,capacidadMujer:e.pplMaxMujer,capacidadTotal:u,usoCapacidadHombre:{data:v+"%",class:d(v)},usoCapacidadMujer:{data:H+"%",class:d(H)},usoCapacidadTotal:{data:w+"%",class:d(w)},usoImputadoHombre:{data:T+"%",class:d(T)},usoImputadoMujer:{data:g+"%",class:d(g)},usoImputadoTotal:{data:C+"%",class:d(C)}}},$=async e=>{if(!t.listadoRegiones.length>0){let o=await N();p.value=o,t.setRegionesList(o)}else p.value=t.listadoRegiones},k=async()=>{var a;const e={regionId:((a=n.value)==null?void 0:a.id)??n.value};let o=await J(e);t.setCarcelesList(o)},_=async()=>{var e,o;try{if((e=t==null?void 0:t.regionSelected)!=null&&e.id){const a={year:2022,month:12,categoryId:f,subCategoryId:oe,regionId:((o=n.value)==null?void 0:o.id)??n.value,embedPopulation:!0};await k();let s=await U(a);s.items.length?m.value=s.items.map(r=>D(r)).filter(r=>r==null?void 0:r.carcelId):m.value=[]}}catch(a){console.log(a)}};return S(async()=>{n.value=t.regionSelected,await $(),await _(),x.value=!0}),(e,o)=>(R(),E(A,{class:"contenido-imputados"},{default:L(()=>[l(O,{title:M.value,"section-value":f},null,8,["title"]),b("div",X,[l(q,{class:"select-region",options:p.value,modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=a=>n.value=a)},null,8,["options","modelValue"]),l(I,{class:"btn-search",title:"",onExecuteAction:_})]),!h.value&&e.topPosition!==0?(R(),F("div",Y,[l(I,{class:"btn-volver",title:"Volver",onExecuteAction:P,disabled:e.blockButton},null,8,["disabled"])])):z("",!0),b("div",Z,[l(K,{class:"subsection-imputados",title:M.value,"section-value":f,pointValue:e.pointCalculated,pointTitle:"Tasa de ocupación",pointSubtitle:""},null,8,["title","pointValue"]),b("div",ee,[l(Q,{"parent-columns":y.value,columns:V.value,rows:m.value},null,8,["parent-columns","columns","rows"])])])]),_:1}))}};export{le as default};
