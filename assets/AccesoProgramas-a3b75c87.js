import{u as M,g as n,r as D,o as _,f as v,j as h,_ as X,m as d,n as Y,b as a,a as I,k as j}from"./index-c8938612.js";import{_ as z}from"./subSideNav-83b573e9.js";import{_ as H}from"./CHeaderBar-52290071.js";import{_ as R}from"./CFilterbar-6e8993b2.js";import{_ as V}from"./CCard-96aa4865.js";import{_ as W}from"./CColunmChart-d78b7003.js";import"./CChartDonutSection-e94e3819.js";import"./CButton-1d70cd49.js";const U={class:"chart-section-principal"},G={class:"acceso-programas"},J={class:"chart-section"},K={class:"information-section"},Q=a("span",{class:"question--value"},"1. Nunca",-1),Z=a("span",{class:"question--value"},"2. Casi nunca ",-1),ee=a("span",{class:"question--value"},"3. A veces",-1),ae=a("span",{class:"question--value"},"4. Casi siempre",-1),se=a("span",{class:"question--value"},"5. Siempre",-1),te=a("span",{class:"card-title"},"Preguntas",-1),oe=a("span",{class:"question--value"},"3.1 Aquí he podido trabajar y ganar algo de plata",-1),le=a("span",{class:"question--value"},"3.2 En esta cárcel he recibido capacitación laboral ",-1),ie=a("span",{class:"question--value"},"3.3 Aquí he podido hablar con asistente social",-1),ne=a("span",{class:"question--value"},"3.4 Aquí he podido conversar con la psicóloga",-1),ce=a("span",{class:"question--value"},"3.5 Aquí puedo ir donde el paramédico si lo necesito",-1),re=a("span",{class:"question--value"},"3.6 En esta cárcel he podido ir a la escuela o liceo penal",-1),ue=a("span",{class:"question--value"},"3.7 Aquí se puede ir a talleres de alcohol o drogas si se necesita",-1),p=1,qe={__name:"AccesoProgramas",setup(de){const t=M(),o=n(!1),f=n("Calidad de vida de los internos / Acceso a programas"),m=n(""),u=n([]),$=n({categories:["3.1","3.2","3.3","3.4","3.5","3.6","3.7"],crosshair:!1}),k=n({min:1,allowDecimals:!1,max:5,title:{text:""}}),F=n({column:{pointPadding:.2,borderWidth:0}}),E=n({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),r=D([]),N=(e,l,s)=>D({id:e,name:l,data:s,dataLabels:{enabled:!0,color:"#000",align:"left",x:0,style:{inside:!1,fontSize:"12px",bold:400,fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),O=async e=>{o.value=!0;const l=r.filter(s=>s.id!==e);u.value=u.value.filter(s=>s.carcelId!==e),g(),r.splice(0,r.length),l.map(s=>r.push(s)),await t.sleep(50),o.value=!1},T=e=>e?Math.round(e*100)/100:0,g=()=>{let e=u.value.reduce((l,s)=>l+s.pointCarcel,0);e=e/u.value.length,e=T(e),m.value=e.toString()},y=async(e,l,s)=>{var b,q;try{let c=((b=t==null?void 0:t.penitenciaria)==null?void 0:b.id)??null,x=((q=t==null?void 0:t.penitenciaria)==null?void 0:q.description)??null,A=t.historyId;if(s&&(c=e,x=l),A&&c){o.value=!0;let L=await j({historyId:A,carcelId:c,categoryId:p,subCategoryId:3});const S=[];let C=0,P=L.filter(i=>i.poundUsed===1);P.map(i=>{const w=i!=null&&i.valuePound?Math.round((i==null?void 0:i.valuePound)*100)/100:0;C+=w,S.push(w)}),u.value.push({carcelId:c,pointCarcel:C/P.length}),g(),r.push(N(c,x,S))}}catch(c){console.log(c)}finally{s||(o.value=!1)}},B=async()=>{o.value=!0,t.carcelesSelected&&t.carcelesSelected.length>0&&await Promise.all(t.carcelesSelected.map(async e=>await y(e.id,e.description,!0))),o.value=!1};return(e,l)=>(_(),v(X,null,{default:h(()=>[d(H,{title:f.value,"section-value":p},null,8,["title"]),d(Y,{"active-spin":o.value},null,8,["active-spin"]),d(R,{baseFilter:p,multipleDisabled:!1,onExecuteMount:B,onExecuteAction:y,onExecuteRemove:O}),a("div",U,[o.value?I("",!0):(_(),v(z,{key:0,title:f.value,"section-value":p,pointValue:m.value,pointTitle:"Acceso a programas",pointSubtitle:"Promedio respuestas sobre acceso a programas"},null,8,["title","pointValue"])),a("div",G,[a("div",J,[o.value?I("",!0):(_(),v(W,{key:0,chartType:"bar",optionsAxisX:$.value,optionsAxisY:k.value,plotOptions:F.value,tooltip:E.value,series:r},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),a("div",K,[d(V,{class:"card-escala"},{default:h(()=>[Q,Z,ee,ae,se]),_:1}),d(V,{class:"card-preguntas"},{default:h(()=>[te,oe,le,ie,ne,ce,re,ue]),_:1})])])])]),_:1}))}};export{qe as default};
