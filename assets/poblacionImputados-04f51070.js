import{g as n,h as B,o as C,f as S,j as E,_ as L,q as A,l as N,m as l,b as p,x as U,c as q,a as F,e as z,C as G}from"./index-8d4f2d0d.js";import{_ as J}from"./subSideNav-6a4a3c87.js";import{_ as K}from"./CHeaderBar-7efe5fed.js";import"./CChartDonutSection-15b10d00.js";import{_ as R}from"./CButton-8c26c48a.js";import{_ as O}from"./CTable-18a4dd69.js";import{s as Q}from"./filterSituacion-3793df01.js";const W={class:"selected-options"},X={key:0,class:"c-option-volver"},Y={class:"table-section-principal"},Z={class:"content__section"},I=3,ie={__name:"poblacionImputados",setup(ee){const t=Q(),m=n("Estado situación carcelaria / Tasa de ocupación imputados Vs Total"),x=n(!1),r=n(),b=n([]),h=n([{description:"Centro penitenciario",colspan:1},{description:"Imputados",colspan:3},{description:"Total PPL. 24h",colspan:3},{description:"Capacidad según diseño (Incluye 24 hrs y juveniles)",colspan:3},{description:"% Uso capacidad total",colspan:3},{description:"% Uso imputado",colspan:3}]),V=n([{rowReference:"establecimiento",description:""},{rowReference:"imputadoHombre",description:"Hombre"},{rowReference:"imputadoMujer",description:"Mujer"},{rowReference:"imputadoTotal",description:"Total"},{rowReference:"totalPplHombre",description:"Hombre"},{rowReference:"totalPplMujer",description:"Mujer"},{rowReference:"totalPplTotal",description:"Total"},{rowReference:"capacidadHombre",description:"Hombre"},{rowReference:"capacidadMujer",description:"Mujer"},{rowReference:"capacidadTotal",description:"Total"},{rowReference:"usoCapacidadHombre",description:"Hombre"},{rowReference:"usoCapacidadMujer",description:"Mujer"},{rowReference:"usoCapacidadTotal",description:"Total"},{rowReference:"usoImputadoHombre",description:"Hombre"},{rowReference:"usoImputadoMujer",description:"Mujer"},{rowReference:"usoImputadoTotal",description:"Total"}]),M=n([]),y=()=>{z.push("/situacionCarcelaria")},i=e=>e?Math.round(e*100)/100:0,d=e=>e<85?"class-verde":e>85&&e<99?"class-ambar":"class-rojo",P=e=>{const o=t.listadoCarceles.value.find(k=>k.id===e.carcelId),a=e.imputadoHombre+e.condenadoHombre+e.procesadoHombre+e.detenidoHombre,c=e.imputadoMujer+e.condenadoMujer+e.procesadoMujer+e.detenidoMujer,s=a+c,_=e.imputadoHombre+e.imputadoMujer,u=e.pplMaxMujer+e.pplMaxHombre,j=a&&e.pplMaxHombre?i(a*100/e.pplMaxHombre):0,H=c&&e.pplMaxMujer?i(c*100/e.pplMaxMujer):0,v=s&&u?i(s*100/u):0,w=e.imputadoHombre&&e.pplMaxHombre?i(e.imputadoHombre*100/e.pplMaxHombre):0,T=e.imputadoMujer&&e.pplMaxMujer?i(e.imputadoMujer*100/e.pplMaxMujer):0,g=_&&u?i(_*100/u):0;if(o&&(o!=null&&o.id))return{carcelId:o.id,establecimiento:o.description,imputadoHombre:e.imputadoHombre,imputadoMujer:e.imputadoMujer,imputadoTotal:e.imputadoHombre+e.imputadoMujer,totalPplHombre:a,totalPplMujer:c,totalPplTotal:a+c,capacidadHombre:e.pplMaxHombre,capacidadMujer:e.pplMaxMujer,capacidadTotal:u,usoCapacidadHombre:{data:j+"%",class:d(j)},usoCapacidadMujer:{data:H+"%",class:d(H)},usoCapacidadTotal:{data:v+"%",class:d(v)},usoImputadoHombre:{data:w+"%",class:d(w)},usoImputadoMujer:{data:T+"%",class:d(T)},usoImputadoTotal:{data:g+"%",class:d(g)}}},D=async e=>{if(!t.listadoRegiones.length>0){let o=await A();b.value=o,t.setRegionesList(o)}},$=async()=>{var a;const e={regionId:((a=r.value)==null?void 0:a.id)??r.value};let o=await G(e);t.setCarcelesList(o)},f=async()=>{var e,o;try{if((e=t==null?void 0:t.regionSelected)!=null&&e.id){const a={year:2022,month:12,regionId:((o=r.value)==null?void 0:o.id)??r.value,embedPopulation:!0};await $();let c=await N(a);M.value=c.items.map(s=>P(s)).filter(s=>s==null?void 0:s.carcelId)}}catch(a){console.log(a)}};return B(async()=>{r.value=t.regionSelected,await D(),await f(),x.value=!0}),(e,o)=>(C(),S(L,{class:"contenido-imputados"},{default:E(()=>[l(K,{title:m.value,"section-value":I},null,8,["title"]),p("div",W,[l(U,{class:"select-region",options:b.value,modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=a=>r.value=a)},null,8,["options","modelValue"]),l(R,{class:"btn-search",title:"",onExecuteAction:f})]),!e.activeSpin&&e.topPosition!==0?(C(),q("div",X,[l(R,{class:"btn-volver",title:"Volver",onExecuteAction:y,disabled:e.blockButton},null,8,["disabled"])])):F("",!0),p("div",Y,[l(J,{class:"subsection-imputados",title:m.value,"section-value":I,pointValue:e.pointCalculated,pointTitle:"Tasa de ocupación",pointSubtitle:""},null,8,["title","pointValue"]),p("div",Z,[l(O,{"parent-columns":h.value,columns:V.value,rows:M.value},null,8,["parent-columns","columns","rows"])])])]),_:1}))}};export{ie as default};
