import{u as P,g as r,r as g,o as b,f as x,j as Q,_ as k,l as f,m as E,b as _,a as N,n as T}from"./index-d0b13c49.js";import{_ as B}from"./subSideNav-d7a3e6d7.js";import{_ as L}from"./CHeaderBar-9f7ed46f.js";import{_ as O}from"./CFilterbar-bfe7ffa8.js";import"./CCard-38e247ee.js";import{_ as R}from"./CColunmChart-e7acc885.js";import"./CSelect.vue_vue_type_style_index_0_lang-d10d4f65.js";import"./CSelect-9cf0a756.js";import"./carceles-d5ea5d1e.js";const X={class:"chart-section-principal"},Y={class:"cuestionario-ghq-funcionario"},z={class:"chart-section"},v=2,oe={__name:"cuestionarioIGHQ",setup(M){const i=P(),s=r(!1),h=r("Calidad de vida de los funcionarios / Cuestionario de Salud GHQ-12 de Goldberg"),S=r("-");r(0);const I=r({categories:["Ausencia","Sospecha","Presencia","No asignado"],crosshair:!1}),w=r({min:0,allowDecimals:!1,title:{text:"Escala de frecuencia"}}),D=r({column:{pointPadding:.2,borderWidth:3}}),G=r({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b>%</td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),c=g([]),C=(e,a,t)=>g({id:e,name:a,data:t,dataLabels:{enabled:!0,color:"#fff",align:"center",x:-15,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),V=async e=>{s.value=!0;const a=c.filter(t=>t.id!==e);c.splice(0,c.length),a.map(t=>c.push(t)),await i.sleep(50),s.value=!1},H=e=>{let a=e[0].recordId,t=0,n=0,l=0,o=0;for(let d=0;d<e.length;d++){let p=e[d];p.recordId==a&&p.pound>=0?o+=p.pound:(o<2?t++:o>2&&o<=6?n++:o>6&&l++,o=p.pound,a=p.recordId)}const u=t+n+l;return t=t/u*100,n=n/u*100,l=l/u*100,[m(t),m(n),m(l)]},m=e=>e?Math.round(e*100)/100:0,y=async(e,a,t)=>{var n,l;try{let o=((n=i==null?void 0:i.penitenciaria)==null?void 0:n.id)??null,u=((l=i==null?void 0:i.penitenciaria)==null?void 0:l.description)??null,d=i.historyId;if(t&&(o=e,u=a),d&&o){s.value=!0;let F=await T({historyId:d,carcelId:o,categoryId:2,subCategoryId:22,embedDetail:!0});const $=H(F.items);c.push(C(o,u,$))}}catch(o){console.log(o)}finally{t||(s.value=!1)}},A=async()=>{s.value=!0,i.carcelesSelected&&i.carcelesSelected.length>0&&await Promise.all(i.carcelesSelected.map(async e=>await y(e.id,e.description,!0))),s.value=!1};return(e,a)=>(b(),x(k,null,{default:Q(()=>[f(L,{title:h.value,"section-value":v},null,8,["title"]),f(E,{"active-spin":s.value},null,8,["active-spin"]),f(O,{baseFilter:v,multipleDisabled:!1,onExecuteMount:A,onExecuteAction:y,onExecuteRemove:V}),_("div",X,[f(B,{class:"subsection-funcionarios",title:h.value,"section-value":v,pointValue:S.value,pointTitle:"Cuestionario General de Salud GHQ-12 de Goldberg",pointSubtitle:"Promedio respuestas cuestionario General de Salud GHQ-12 de Goldberg"},null,8,["title","pointValue"]),_("div",Y,[_("div",z,[s.value?N("",!0):(b(),x(R,{key:0,chartType:"bar",optionsAxisX:I.value,optionsAxisY:w.value,plotOptions:D.value,tooltip:G.value,series:c},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))])])])]),_:1}))}};export{oe as default};
