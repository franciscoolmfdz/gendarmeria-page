import{o as r,f as v,g as e,b as t,t as V,c as g,n as A,h as E,i as f,u as z,j as L,k as M,_ as T,l as j,m as s,p as q,a as b}from"./index-70926910.js";import{_ as I}from"./CCard-3d6808c8.js";import{_ as U}from"./CHeaderBar-a99216df.js";const J={class:"point-section"},K={class:"circle-point"},O={class:"card-puntuacion"},W={width:"160",height:"160",xmlns:"http://www.w3.org/2000/svg"},X=t("circle",{class:"circle_animation-back",r:"65.85699",cy:"81",cx:"81","stroke-width":"8",fill:"none"},null,-1),Y={class:"content-section"},Z={class:"card-title"},tt={class:"card-body"},et={class:"footer-section"},u={__name:"CChartDonutSection",props:{title:{type:String,default:null},subtitle:{type:String,default:null},pointValue:{type:Number,default:null}},setup(p){const C=o=>{if(o){if(o>0&&o<=1)return"a-bit";if(o>1&&o<=1.5)return"quarter";if(o>1.5&&o<=2)return"half-to-half";if(o>2&&o<=2.499)return"almost-half";if(o===2.5)return"half";if(o>2.5&&o<=3.5)return"more-half";if(o>3.5&&o<=4)return"more-half-half";if(o>4&&o<=4.9)return"almost-full";if(o===5)return"full"}else return"zero"};return(o,a)=>(r(),v(I,{class:"donut-section card-information"},{default:e(()=>[t("div",J,[t("div",K,[t("span",O,V(p.pointValue||""),1),(r(),g("svg",W,[t("g",null,[X,t("circle",{class:A(["circle_animation",C(p.pointValue)]),r:"65.85699",cy:"81",cx:"81","stroke-width":"8",fill:"none"},null,2)])]))])]),t("div",Y,[t("span",Z,V(p.title),1),t("span",tt,V(p.subtitle),1)]),t("div",et,[E(o.$slots,"default")])]),_:3}))}};const st={key:0,class:"principal-section section-internos"},ot={class:"principal-section"},nt={key:0,class:"principal-section__top top-position-one"},at=t("span",{class:"sub-menu__option--title"}," Ver más ",-1),lt=t("span",{class:"sub-menu__option--title"}," Ver más ",-1),it=t("span",{class:"sub-menu__option--title"}," Ver más ",-1),ct=t("span",{class:"sub-menu__option--title"}," Ver más ",-1),ut=t("span",{class:"sub-menu__option--title"}," Ver más ",-1),rt={key:1,class:"principal-section__top top-position-two"},_t=t("span",{class:"sub-menu__option--title"}," Ver más ",-1),dt=t("span",{class:"sub-menu__option--title"}," Ver más ",-1),pt=t("span",{class:"sub-menu__option--title"}," Ver más ",-1),mt=t("span",{class:"sub-menu__option--title"}," Ver más ",-1),ft={class:"principal-section__bottom"},bt=t("span",{class:"sub-menu__option--title"},"Información personal",-1),ht=t("span",{class:"sub-menu__option--text"}," Consulta sobre información personal de internos ",-1),vt=t("span",{class:"sub-menu__option--title"},"Régimen carcelario",-1),gt=t("span",{class:"sub-menu__option--text"},"Consulta sobre el régimen carcelario",-1),Ct=t("span",{class:"sub-menu__option--title"},"Funcionamiento de la carcel",-1),yt=t("span",{class:"sub-menu__option--text"}," Consulta sobre funcionamiento de la carcel",-1),wt=t("span",{class:"sub-menu__option--title"},"Evaluación general",-1),St=t("span",{class:"sub-menu__option--text"}," Consulta de evaluación general ",-1),Vt=t("span",{class:"sub-menu__option--title"}," Infraestructura carcelaria",-1),It=t("span",{class:"sub-menu__option--text"}," Consulta a los internos sobre la infraestructura carcelaria",-1),$t=t("span",{class:"sub-menu__option--title"},"Acceso a programas",-1),kt=t("span",{class:"sub-menu__option--text"}," Consulta a los internos sobre el acceso a programas de los internos",-1),xt=t("span",{class:"sub-menu__option--title"},"Trato con funcionarios",-1),Dt=t("span",{class:"sub-menu__option--text"},"Consulta a los internos sobre la relación con los funcionarios",-1),Gt=t("span",{class:"sub-menu__option--title"}," Cuestionario Salud GHQ-12 ",-1),Ht=t("span",{class:"sub-menu__option--text"}," Consulta de resultados cuestionario de Salud GHQ-12 ",-1),Pt=1,Nt={__name:"VidaInternos",setup(p){const C=f("Calidad de vida de los internos"),o=f(!1),a=z(),c=f([]);f([]);const _=f(0),H=l=>l>0?Math.round(l*100)/100:0,$=async l=>{l===1?(o.value=!0,c.value=[],_.value=l,a.carcelesSelected&&a.carcelesSelected.length>0&&await a.carcelesSelected.map(async i=>await y(i.id,i.description,!0,2,5))):l===2&&(o.value=!0,c.value=[],_.value=l,a.carcelesSelected&&a.carcelesSelected.length>0&&await a.carcelesSelected.map(async i=>await y(i.id,i.description,!0,6,8)))},y=async(l,i,n,w=2,P=5)=>{var k,x;try{o.value=!0;let m=((k=a==null?void 0:a.penitenciaria)==null?void 0:k.id)??null,Q=((x=a==null?void 0:a.penitenciaria)==null?void 0:x.description)??null;n&&(m=l,Q=i);const D=12;if(D&&m){let R=await j({historyId:D,carcelId:m,categoryId:1}),d=null;for(let S=w;S<=P;S++){const B=S,G=R.filter(h=>h.subCategoryId===B&&h.valueUsed===1),F=G.length;d=G.reduce((h,N)=>h+N.promPound,0),d=d/F,d=H(d),c.value.push(d)}}}catch(m){console.log(m)}finally{o.value=!1}};return L(async()=>{o.value=!0,a.carcelesSelected&&a.carcelesSelected.length>0&&await a.carcelesSelected.map(async l=>await y(l.id,l.description,!0))}),(l,i)=>{const n=M("RouterLink");return r(),v(T,{class:"panel-vida-internos"},{default:e(()=>[s(U,{title:C.value,"section-value":Pt},null,8,["title"]),s(q,{"active-spin":o.value},null,8,["active-spin"]),!o.value&&c.value.length>0?(r(),g("div",st,[t("div",ot,[_.value==1?(r(),g("div",nt,[s(u,{class:"section-donut",title:"Infraestructura carcelaria",subtitle:"Consulta a los internos sobre la infraestructura carcelaria","point-value":c.value[0]},{default:e(()=>[s(n,{to:"accesoProgramas",class:"sub-menu--option white btn-small"},{default:e(()=>[at]),_:1})]),_:1},8,["point-value"]),s(u,{class:"section-donut",title:"Acceso a programas",subtitle:"Consulta a los internos sobre el acceso a programas de los internos","point-value":c.value[1]},{default:e(()=>[s(n,{to:"accesoProgramas",class:"sub-menu--option white btn-small"},{default:e(()=>[lt]),_:1})]),_:1},8,["point-value"]),s(u,{class:"section-donut",title:"Trato entre los internos",subtitle:"Consulta a los internos sobre la vida carcelaria","point-value":c.value[2]},{default:e(()=>[s(n,{to:"vidaInternosTrato",class:"sub-menu--option white btn-small"},{default:e(()=>[it]),_:1})]),_:1},8,["point-value"]),s(u,{class:"section-donut",title:"Trato con funcionarios",subtitle:"Consulta a los internos sobre la relación con los funcionarios","point-value":c.value[3]},{default:e(()=>[s(n,{to:"vidaInternosFuncionario",class:"sub-menu--option white btn-small"},{default:e(()=>[ct]),_:1})]),_:1},8,["point-value"]),s(u,{class:"section-donut",title:"Cuestionario Salud GHQ-12",subtitle:"Consulta de resultados cuestionario de Salud GHQ-12","point-value":0},{default:e(()=>[s(n,{to:"cuestionarioGHQInterno",class:"sub-menu--option white btn-small"},{default:e(()=>[ut]),_:1})]),_:1})])):b("",!0),_.value==2?(r(),g("div",rt,[s(u,{class:"section-donut",title:"Información personal",subtitle:"Consulta sobre información personal de internos","point-value":0},{default:e(()=>[s(n,{to:"vidaInternosPersonal",class:"sub-menu--option white btn-small"},{default:e(()=>[_t]),_:1})]),_:1}),s(u,{class:"section-donut",title:"Régimen carcelario",subtitle:"Consulta sobre el régimen carcelario","point-value":c.value[0]},{default:e(()=>[s(n,{to:"regimenCarcel",class:"sub-menu--option white btn-small"},{default:e(()=>[dt]),_:1})]),_:1},8,["point-value"]),s(u,{class:"section-donut",title:"Funcionamiento de la carcel",subtitle:"Consulta sobre funcionamiento de la carcel","point-value":c.value[1]},{default:e(()=>[s(n,{to:"funcionamientoCarcel",class:"sub-menu--option white btn-small"},{default:e(()=>[pt]),_:1})]),_:1},8,["point-value"]),s(u,{class:"section-donut",title:"Evaluación general",subtitle:"Consulta de evaluación general","point-value":c.value[2]},{default:e(()=>[s(n,{to:"vidaInternosGeneral",class:"sub-menu--option white btn-small"},{default:e(()=>[mt]),_:1})]),_:1},8,["point-value"])])):b("",!0)]),t("div",ft,[_.value!==2?(r(),v(I,{key:0,class:"card-information",onClick:i[0]||(i[0]=w=>$(2))},{default:e(()=>[s(n,{to:"#",class:"sub-menu--option options-bottom"},{default:e(()=>[bt,ht]),_:1}),s(n,{to:"#",class:"sub-menu--option options-bottom"},{default:e(()=>[vt,gt]),_:1}),s(n,{to:"#",class:"sub-menu--option options-bottom"},{default:e(()=>[Ct,yt]),_:1}),s(n,{to:"#",class:"sub-menu--option options-bottom"},{default:e(()=>[wt,St]),_:1})]),_:1})):b("",!0),_.value!==1?(r(),v(I,{key:1,class:"card-information",onClick:i[1]||(i[1]=w=>$(1))},{default:e(()=>[s(n,{to:"#",class:"sub-menu--option options-bottom"},{default:e(()=>[Vt,It]),_:1}),s(n,{to:"#",class:"sub-menu--option options-bottom"},{default:e(()=>[$t,kt]),_:1}),s(n,{to:"#",class:"sub-menu--option options-bottom"},{default:e(()=>[xt,Dt]),_:1}),s(n,{to:"#",class:"sub-menu--option options-bottom"},{default:e(()=>[Gt,Ht]),_:1})]),_:1})):b("",!0)])])):b("",!0)]),_:1})}}};export{Nt as default};
