import{_ as P}from"./CButton-1d70cd49.js";import{_ as l}from"./CChartDonutSection-e94e3819.js";import{g as f,u as G,h as Q,i as F,o as m,f as V,j as t,_ as T,k as N,l as z,m as s,c as C,a as b,n as O,b as o}from"./index-c8938612.js";import{_ as J}from"./CHeaderBar-52290071.js";import{_ as k}from"./CCard-96aa4865.js";const E={key:0,class:"c-option-volver"},L={key:1,class:"principal-section section-funcionarios"},U={class:"principal-section"},q={key:0,class:"principal-section__top position-one"},K=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),W=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),X=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),Y=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),Z={key:1,class:"principal-section__top position-two"},tt=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),st=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),ot=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),et=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),nt={key:2,class:"principal-section__top position-three"},at=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),it=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),lt=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),ut=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),ct=o("span",{class:"sub-menu__option--title"}," Ver más ",-1),rt={class:"principal-section__bottom"},_t=o("span",{class:"sub-menu__option--title"},"Relación Jefatura",-1),pt=o("span",{class:"sub-menu__option--text"}," Consulta a los funcionarios sobre su relación con sus jefaturas ",-1),dt=o("span",{class:"sub-menu__option--title"},"Confianza y valoración",-1),mt=o("span",{class:"sub-menu__option--text"}," Consulta a los funcionarios sobre confianza y valoración entre sus pares ",-1),bt=o("span",{class:"sub-menu__option--title"},"Apego institucional",-1),vt=o("span",{class:"sub-menu__option--text"},"Consulta a los funcionarios sobre el apego institucional",-1),ft=o("span",{class:"sub-menu__option--title"},"Carga trabajo",-1),ht=o("span",{class:"sub-menu__option--text"},"Consulta a los funcionarios sobre la carga trabajo",-1),Ct=o("span",{class:"sub-menu__option--title"},"Motivación en el trabajo",-1),gt=o("span",{class:"sub-menu__option--text"}," Consulta sobre su motivación en el trabajo ",-1),yt=o("span",{class:"sub-menu__option--title"},"Relación compañeros/as",-1),wt=o("span",{class:"sub-menu__option--text"}," Consulta sobre su relación entre compañeros/as ",-1),Vt=o("span",{class:"sub-menu__option--title"},"Seguridad personal",-1),It=o("span",{class:"sub-menu__option--text"}," Consulta sobre su seguridad personal",-1),xt=o("span",{class:"sub-menu__option--title"},"Organización y orden",-1),kt=o("span",{class:"sub-menu__option--text"}," Consulta sobre la Organización y el orden",-1),Rt=o("span",{class:"sub-menu__option--title"},"Apoyo a la reinserción ",-1),jt=o("span",{class:"sub-menu__option--text"}," Consulta sobre su rol en el apoyo a la reinserción ",-1),zt=o("span",{class:"sub-menu__option--title"},"Relación con internos ",-1),Dt=o("span",{class:"sub-menu__option--text"}," Consulta sobre su relación con los internos ",-1),Ht=o("span",{class:"sub-menu__option--title"},"Conocimiento normativas ",-1),Mt=o("span",{class:"sub-menu__option--text"}," Consulta sobre su conocimiento de normativas ",-1),St=o("span",{class:"sub-menu__option--title"},"Presión para tomar decisiones ",-1),$t=o("span",{class:"sub-menu__option--text"}," Consulta sobre la toma de decisiones ",-1),At=o("span",{class:"sub-menu__option--title"}," Cuestionario Salud GHQ-12 ",-1),Bt=o("span",{class:"sub-menu__option--text"}," Consulta de resultados cuestionario de Salud GHQ-12 ",-1),Pt=2,Jt={__name:"VidaFuncionarios",setup(Gt){const D=f("Calidad de vida de los funcionarios"),p=f(!1),R=G(),a=f([]),d=f(1),g=f(null),y=f(null),H=n=>n>0?Math.round(n*100)/100:0,M=()=>{d.value=0},I=async n=>{p.value=!0,d.value=n,p.value=!1},j=async()=>{let n={categoryId:2,lastPeriod:!0};return n={categoryId:2,historyId:(await z(n)).id},g.value&&(n.regionId=g.value),y.value&&(n.carcelId=y.value),n},S=async(n=9,i=20)=>{try{p.value=!0;const e=await j();let c=await N(e),r=null;for(let _=n;_<=i;_++){const x=_,v=c.filter(u=>u.subCategoryId===x&&u.valueUsed===1),h=v.length;r=v.reduce((u,B)=>u+B.valuePound,0),r=r/h,r=H(r),a.value.push(r)}}catch(e){console.log(e)}},$=n=>{let i=n[0].recordId,e=0,c=0,r=0,_=0,x=0;for(let h=0;h<n.length;h++){let u=n[h];u.recordId==i&&u.pound>=0?(_+=u.pound,x+=u.value):(_<2?e++:_>2&&_<=6?c++:_>6&&r++,_=u.pound,i=u.recordId)}const v=e+c+r;return Math.max(Math.round(w(e/v*100)),Math.round(w(c/v*100)),Math.round(w(r/v*100)))},w=n=>n?Math.round(n*100)/100:0,A=async()=>{try{let n=await j();p.value=!0;const i={...n,subCategoryId:22,embedDetail:!0};let e=await z(i);const c=$(e.items);a.value.push(w(c))}catch(n){console.log(n)}};return Q(async()=>{p.value=!0;const n=R.user.restrictions.find(e=>e.typeId===2),i=R.user.restrictions.find(e=>e.typeId===3);n?g.value=parseInt(n.restriction):i?y.value=parseInt(i.restriction):(y.value=null,g.value=null),await S(),await A(),console.log(a.value),p.value=!1}),(n,i)=>{const e=F("RouterLink");return m(),V(T,{class:"panel-vida-funcionarios"},{default:t(()=>[s(J,{title:D.value,"section-value":Pt},null,8,["title"]),!p.value&&d.value!==0?(m(),C("div",E,[s(P,{class:"btn-volver",title:"Volver",onExecuteAction:M,disabled:n.blockButton},null,8,["disabled"])])):b("",!0),s(O,{"active-spin":p.value},null,8,["active-spin"]),!p.value&&a.value.length>0?(m(),C("div",L,[o("div",U,[d.value==1?(m(),C("div",q,[s(l,{class:"section-donut",title:"Relación Jefatura",subtitle:"Consulta a los funcionarios sobre su relación con sus jefaturas","point-value":a.value[0]},{default:t(()=>[s(e,{to:"relacionJefatura",class:"sub-menu--option white btn-small"},{default:t(()=>[K]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Confianza y valoración",subtitle:"Consulta a los funcionarios sobre confianza y valoración entre sus pares","point-value":a.value[1]},{default:t(()=>[s(e,{to:"confianzaValoracion",class:"sub-menu--option white btn-small"},{default:t(()=>[W]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Apego institucional",subtitle:"Consulta a los funcionarios sobre el apego institucional","point-value":a.value[2]},{default:t(()=>[s(e,{to:"apegoInstitucional",class:"sub-menu--option white btn-small"},{default:t(()=>[X]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Carga trabajo",subtitle:"Consulta a los funcionarios sobre la carga trabajo","point-value":a.value[3]},{default:t(()=>[s(e,{to:"cargaTrabajo",class:"sub-menu--option white btn-small"},{default:t(()=>[Y]),_:1})]),_:1},8,["point-value"])])):b("",!0),d.value==2?(m(),C("div",Z,[s(l,{class:"section-donut",title:"Motivación en el trabajo",subtitle:"Consulta sobre su motivación en el trabajo","point-value":a.value[4]},{default:t(()=>[s(e,{to:"motivacionTrabajo",class:"sub-menu--option white btn-small"},{default:t(()=>[tt]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Relación compañeros/as",subtitle:"Consulta sobre su relación entre compañeros/as ","point-value":a.value[5]},{default:t(()=>[s(e,{to:"relacionCoop",class:"sub-menu--option white btn-small"},{default:t(()=>[st]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Seguridad personal",subtitle:"Consulta sobre su seguridad personal","point-value":a.value[6]},{default:t(()=>[s(e,{to:"seguridad",class:"sub-menu--option white btn-small"},{default:t(()=>[ot]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Organización y orden",subtitle:"Consulta sobre organización y el orden","point-value":a.value[7]},{default:t(()=>[s(e,{to:"organizacionOrden",class:"sub-menu--option white btn-small"},{default:t(()=>[et]),_:1})]),_:1},8,["point-value"])])):b("",!0),d.value==3?(m(),C("div",nt,[s(l,{class:"section-donut",title:"Apoyo a la reinserción",subtitle:"Consulta sobre su rol en el apoyo a la reinserción","point-value":a.value[8]},{default:t(()=>[s(e,{to:"apoyoReinsercion",class:"sub-menu--option white btn-small"},{default:t(()=>[at]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Relación con internos",subtitle:"Consulta sobre su relación con los internos","point-value":a.value[9]},{default:t(()=>[s(e,{to:"funcionarioInternos",class:"sub-menu--option white btn-small"},{default:t(()=>[it]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Conocimiento normativas",subtitle:"Consulta sobre su conocimiento de normativas","point-value":a.value[10]},{default:t(()=>[s(e,{to:"conocimientoNormativa",class:"sub-menu--option white btn-small"},{default:t(()=>[lt]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Toma de decisiones",subtitle:"Consulta sobre la toma de decisiones","point-value":a.value[11]},{default:t(()=>[s(e,{to:"TomaDecisiones",class:"sub-menu--option white btn-small"},{default:t(()=>[ut]),_:1})]),_:1},8,["point-value"]),s(l,{class:"section-donut",title:"Cuestionario Salud GHQ-12",subtitle:"Consulta de resultados cuestionario de Salud GHQ-12","point-value":a.value[12],type:2,"is-percent":!0},{default:t(()=>[s(e,{to:"cuestionarioGHQFuncionario",class:"sub-menu--option white btn-small"},{default:t(()=>[ct]),_:1})]),_:1},8,["point-value"])])):b("",!0)]),o("div",rt,[d.value!==1?(m(),V(k,{key:0,class:"card-information",onClick:i[0]||(i[0]=c=>I(1))},{default:t(()=>[s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[_t,pt]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[dt,mt]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[bt,vt]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[ft,ht]),_:1})]),_:1})):b("",!0),d.value!==2?(m(),V(k,{key:1,class:"card-information",onClick:i[1]||(i[1]=c=>I(2))},{default:t(()=>[s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[Ct,gt]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[yt,wt]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[Vt,It]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[xt,kt]),_:1})]),_:1})):b("",!0),d.value!==3?(m(),V(k,{key:2,class:"card-information",onClick:i[2]||(i[2]=c=>I(3))},{default:t(()=>[s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[Rt,jt]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[zt,Dt]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[Ht,Mt]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[St,$t]),_:1}),s(e,{to:"#",class:"sub-menu--option options-bottom"},{default:t(()=>[At,Bt]),_:1})]),_:1})):b("",!0)])])):b("",!0)]),_:1})}}};export{Jt as default};
