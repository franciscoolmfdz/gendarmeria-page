import{u as k,g as l,r as x,o as S,f as I,j as D,_ as N,m as f,n as z,b as _,a as B,l as L}from"./index-21166dae.js";import{_ as M}from"./CHeaderBar-25b66bad.js";import{_ as O}from"./CFilterbar-0fcf70e2.js";import{_ as X}from"./CCard-2679b4c0.js";import{_ as Y}from"./subSideNav-fa8710bf.js";import{_ as H}from"./CColunmChart-e1017be9.js";import"./CButton-02a38a2a.js";import"./CChartDonutSection-87e6722c.js";const W={class:"chart-section-principal"},j={class:"edad-internos"},q={class:"chart-section"},R=_("span",{class:"card-title"},"Pregunta",-1),G=_("span",{class:"question--value"},"FP 1 ¿Cuántos años tiene actualmente?",-1),d=7,se={__name:"edadInternos",setup(J){const a=k(),i=l(!1),y=l("Trayectoria / ¿Cuántos años tiene actualmente?"),g=l(""),w=l({categories:["Menor a 20 años","Entre 20 a 30 años","Entre 30 a 40 años","Entre 40 a 50 años","Entre 50 a 60 años","Mayor a 60 años","No Asignado"],crosshair:!1}),A=l({min:0,allowDecimals:!1,title:{text:"Suma por categoría"}}),C=l({column:{pointPadding:.2,borderWidth:3}}),F=l({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),P=e=>{let o=0,s=0,c=0,u=0,n=0,p=0,m=0,h=0,v=0;for(let t=0;t<e.length;t++)e[t].value>0&&(h+=e[t].value,v++),e[t].value<20&&o++,e[t].value>=20&&e[t].value<30&&s++,e[t].value>=30&&e[t].value<40&&c++,e[t].value>=40&&e[t].value<50&&u++,e[t].value>=50&&e[t].value<=60&&n++,e[t].value>60&&p++,e[t].value===-1&&(m+=e[t].value*-1);return g.value=parseInt(h/v),[o,s,c,u,n,p,m]},r=x([]),$=(e,o,s)=>x({id:e,name:o,data:s,dataLabels:{enabled:!0,color:"#fff",align:"center",x:-15,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),V=async e=>{i.value=!0;const o=r.filter(s=>s.id!==e);r.splice(0,r.length),o.map(s=>r.push(s)),await a.sleep(50),i.value=!1},b=async(e,o,s)=>{var c,u;try{let n=((c=a==null?void 0:a.penitenciaria)==null?void 0:c.id)??null,p=((u=a==null?void 0:a.penitenciaria)==null?void 0:u.description)??null,m=a.historyId;if(s&&(n=e,p=o),m&&n){i.value=!0;let v=await L({historyId:m,carcelId:n,categoryId:d,subCategoryId:23,embedDetail:!0,dimensionId:124});const t=P(v.items);r.push($(n,p,t))}}catch(n){console.log(n)}finally{s||(i.value=!1)}},T=async()=>{i.value=!0,a.carcelesSelected&&a.carcelesSelected.length>0&&await Promise.all(a.carcelesSelected.map(async e=>await b(e.id,e.description,!0))),i.value=!1};return(e,o)=>(S(),I(N,null,{default:D(()=>[f(M,{title:y.value,"section-value":d},null,8,["title"]),f(z,{"active-spin":i.value},null,8,["active-spin"]),f(O,{baseFilter:d,multipleDisabled:!1,onExecuteMount:T,onExecuteAction:b,onExecuteRemove:V}),_("div",W,[f(Y,{class:"subsection-trayectoria",title:y.value,"section-value":d,pointValue:g.value,pointTitle:"FP 1 ¿Cuántos años tiene actualmente?",pointSubtitle:""},null,8,["title","pointValue"]),_("div",j,[_("div",q,[i.value?B("",!0):(S(),I(H,{key:0,chartType:"bar",optionsAxisX:w.value,optionsAxisY:A.value,plotOptions:C.value,tooltip:F.value,series:r},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),f(X,{class:"card-preguntas"},{default:D(()=>[R,G]),_:1})])])]),_:1}))}};export{se as default};
