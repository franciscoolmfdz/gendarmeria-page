import{o as d,c as p,t as h,r as c,h as y,d as $,i as x,v as S,F as w,j as B,a as _,k as F,b,l as k,m as A,n as I,p as N}from"./index-02a86afa.js";import{a as g}from"./api-7944baea.js";import{a as U}from"./dimensionHistory-c3ecec4f.js";const E=["disabled"],L={__name:"CButton",props:{title:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["executeAction"],setup(s,{emit:a}){return(l,t)=>(d(),p("button",{class:"c-button",onClick:t[0]||(t[0]=n=>a("executeAction")),disabled:s.disabled},h(s.title),9,E))}};const j=_("option",{value:""},"Seleccionar opciÃ³n",-1),q=["value"],D={__name:"CSelect",props:{options:{type:Array,required:!0},modelValue:{type:[Object,Number],default:null}},emits:["update:modelValue"],setup(s,{emit:a}){const l=s,t=c(l.modelValue?l.modelValue.id:null);return y(()=>l.modelValue,n=>{t.modelValue=n?n.id:""}),y(t,n=>{a("update:modelValue",n)}),$(()=>{var n;l.modelValue&&(t.modelValue=((n=l.modelValue)==null?void 0:n.id)||l.modelValue)}),(n,u)=>x((d(),p("select",{class:"c-select","onUpdate:modelValue":u[0]||(u[0]=i=>t.value=i)},[j,(d(!0),p(w,null,B(s.options,i=>(d(),p("option",{value:i.id,key:i.id},h(i.description),9,q))),128))],512)),[[S,t.value]])}},V="/dmm/carceles",M=async(s,a)=>{if(s!=null&&s.id){let n=`${V}/${s.id}`;return g(n,"GET",null,a)}let l=V,t=null;return s!=null&&s.regionId&&(t?t=`${t}&regionId=${s.regionId}`:t=`regionId=${s.regionId}`),t&&(l=`${l}?${t}`),g(l,"GET",null,a)},O={id:16,description:"CCP Colina 1"},P=F("filters",()=>{const s=c(null),a=c(),l=c(O),t=c([]);function n(e){e!=null&&e.periodo&&(s.value=(e==null?void 0:e.periodo)??null),e!=null&&e.penitenciaria&&(l.value=e==null?void 0:e.penitenciaria)}function u(e){t.value=e??[]}function i(e){s.value=(e==null?void 0:e.periodo)??null,a.value=(e==null?void 0:e.id)??null}function v(){a.value=null}return{historyId:a,periodo:s,penitenciaria:l,listadoCarceles:t,changeCriteria:n,mountListCarceles:u,mountBaseHistory:i,cleanHistory:v}});const T={class:"c-filterbar"},G="Buscar",Z={__name:"CFilterbar",props:{baseFilter:{type:[Object,Number,String],required:!0}},emits:["executeAction"],setup(s,{emit:a}){const l=s,t=P(),n=c(!1),u=c(t.penitenciaria),i=c(t.periodo),v=async()=>{const m=e.value.filter(f=>f.id===u.value)[0],o=i.value.split("-"),r={year:o[0],month:o[1],categoryId:l.baseFilter};await C(r),t.changeCriteria({periodo:i.value,penitenciaria:m}),a("executeAction")},e=c(t.listadoCarceles),C=async m=>{n.value=!0;const o=await U(m);if(n.value=!1,o&&(o!=null&&o.period)&&(o!=null&&o.id)){const{period:r=null,id:f=null}=o;t.mountBaseHistory({period:r,id:f}),i.value=r}else t.cleanHistory()};return $(async()=>{const m={lastPeriod:!0,categoryId:l.baseFilter};if(await C(m),!e.value||e.value.length===0){const o=await M();e.value=o,t.mountListCarceles(o)}a("executeAction")}),(m,o)=>(d(),p("div",T,[b(D,{options:e.value,modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=r=>u.value=r)},null,8,["options","modelValue"]),x(_("input",{class:"periodo-item",type:"month","onUpdate:modelValue":o[1]||(o[1]=r=>i.value=r)},null,512),[[k,i.value]]),b(L,{title:G,onExecuteAction:v,disabled:n.value},null,8,["disabled"])]))}};const H={class:"card"},z={class:"card-stacked"},J={class:"card-content"},K={key:0,class:"card-action"},Q=N('<div class="row"><a class="col s6 m1 waves-effect waves-light btn amber"><li class="material-icons">edit</li></a><a class="col s6 m1 waves-effect waves-light btn red darken-3"><li class="material-icons">delete</li></a></div>',1),R=[Q],ee={__name:"CCard",props:{actionACtive:{type:Boolean,default:!1}},setup(s){return(a,l)=>(d(),p("div",H,[_("div",z,[_("div",J,[A(a.$slots,"default")]),s.actionACtive?(d(),p("div",K,R)):I("",!0)])]))}};export{Z as _,ee as a,P as u};
