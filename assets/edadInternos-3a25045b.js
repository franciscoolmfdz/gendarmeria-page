import{u as z,g as r,r as M,o as I,f as D,j as w,_ as B,m as d,n as L,b as h,a as O,l as X}from"./index-16ad8c53.js";import{_ as Y}from"./CHeaderBar-3cb4d6a0.js";import{_ as H}from"./CFilterbar-052402ab.js";import{_ as W}from"./CCard-4b439096.js";import{_ as j}from"./subSideNav-309f19b3.js";import{_ as q}from"./CColunmChart-72699445.js";import"./CButton-2c0f70bc.js";import"./CChartDonutSection-fb456158.js";const R={class:"chart-section-principal"},G={class:"edad-internos"},J={class:"chart-section"},K=h("span",{class:"card-title"},"Pregunta",-1),Q=h("span",{class:"question--value"},"1. ¿Cuántos años tiene actualmente?",-1),y=7,le={__name:"edadInternos",setup(U){const o=z(),i=r(!1),b=r("Trayectoria / ¿Cuántos años tiene actualmente?"),x=r(""),p=r([]),A=r({categories:["Menor a 20 años","Entre 20 a 30 años","Entre 30 a 40 años","Entre 40 a 50 años","Entre 50 a 60 años","Mayor a 60 años","No Asignado"],crosshair:!1}),V=r({min:0,allowDecimals:!1,title:{text:"Suma por categoría"}}),$=r({column:{pointPadding:.2,borderWidth:3}}),F=r({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}%</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),u=M([]),P=(e,n,a)=>M({id:e,name:n,data:a,dataLabels:{enabled:!0,color:"#fff",align:"center",x:-15,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),c=e=>e?Math.round(e*100)/100:0,T=async e=>{i.value=!0;const n=u.filter(a=>a.id!==e);u.splice(0,u.length),p.value=p.value.filter(a=>a.carcelId!==e),S(),n.map(a=>u.push(a)),await o.sleep(50),i.value=!1},S=()=>{let e=p.value.reduce((n,a)=>n+a.pointCarcel,0);e=e/p.value.length,e=c(e),x.value=e.toString()},k=(e,n)=>{let a=0,m=0,f=0,s=0,v=0,_=0,g=0,l=0;for(let t=0;t<e.length;t++)e[t].value>0&&(g+=e[t].value,l++),e[t].value<20&&e[t].value>0&&a++,e[t].value>=20&&e[t].value<30&&m++,e[t].value>=30&&e[t].value<40&&f++,e[t].value>=40&&e[t].value<50&&s++,e[t].value>=50&&e[t].value<=60&&v++,e[t].value>60&&_++;return p.value.push({carcelId:n,pointCarcel:Math.round(g/l)}),S(),[Math.round(c(a*100/l)),Math.round(c(m*100/l)),Math.round(c(f*100/l)),Math.round(c(s*100/l)),Math.round(c(v*100/l)),Math.round(c(_*100/l))]},C=async(e,n,a)=>{var m,f;try{let s=((m=o==null?void 0:o.penitenciaria)==null?void 0:m.id)??null,v=((f=o==null?void 0:o.penitenciaria)==null?void 0:f.description)??null,_=o.historyId;if(a&&(s=e,v=n),_&&s){i.value=!0;let l=await X({historyId:_,carcelId:s,categoryId:y,subCategoryId:23,embedDetail:!0,dimensionId:124});const t=k(l.items,s);u.push(P(s,v,t))}}catch(s){console.log(s)}finally{a||(i.value=!1)}},N=async()=>{i.value=!0,o.carcelesSelected&&o.carcelesSelected.length>0&&await Promise.all(o.carcelesSelected.map(async e=>await C(e.id,e.description,!0))),i.value=!1};return(e,n)=>(I(),D(B,null,{default:w(()=>[d(Y,{title:b.value,"section-value":y},null,8,["title"]),d(L,{"active-spin":i.value},null,8,["active-spin"]),d(H,{baseFilter:y,multipleDisabled:!1,onExecuteMount:N,onExecuteAction:C,onExecuteRemove:T}),h("div",R,[d(j,{class:"subsection-trayectoria",title:b.value,"section-value":y,pointValue:x.value,pointTitle:"1. ¿Cuántos años tiene actualmente?",pointSubtitle:"",type:2},null,8,["title","pointValue","pointTitle"]),h("div",G,[h("div",J,[i.value?O("",!0):(I(),D(q,{key:0,chartType:"bar",optionsAxisX:A.value,optionsAxisY:V.value,plotOptions:$.value,tooltip:F.value,series:u},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),d(W,{class:"card-preguntas"},{default:w(()=>[K,Q]),_:1})])])]),_:1}))}};export{le as default};
