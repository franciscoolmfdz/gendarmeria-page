import{_ as J}from"./CButton-02a38a2a.js";import{g as p,u as L,r as Q,h as j,i as G,o as d,f as P,j as n,_ as K,l as F,m as l,c as h,a as m,n as O,b as a}from"./index-21166dae.js";import{_ as r}from"./CChartDonutSection-87e6722c.js";import{_ as U}from"./CHeaderBar-25b66bad.js";import{_ as k}from"./CCard-2679b4c0.js";const W={key:0,class:"c-option-volver"},X={key:1,class:"principal-section section-internos"},Y={class:"principal-section"},Z={key:0,class:"principal-section__top top-position-one"},D=a("span",{class:"sub-menu__option--title"}," Ver más ",-1),ee=a("span",{class:"sub-menu__option--title"}," Ver más ",-1),te=a("span",{class:"sub-menu__option--title"}," Ver más ",-1),oe=a("span",{class:"sub-menu__option--title"}," Ver más ",-1),se={key:1,class:"principal-section__top top-position-two"},ne=a("span",{class:"sub-menu__option--title"}," Ver más ",-1),le=a("span",{class:"sub-menu__option--title"}," Ver más ",-1),ae=a("span",{class:"sub-menu__option--title"}," Ver más ",-1),ie=a("span",{class:"sub-menu__option--title"}," Ver más ",-1),ue={class:"principal-section__bottom"},ce=a("span",{class:"sub-menu__option--title"},"Información personal",-1),re=a("span",{class:"sub-menu__option--text"}," Consulta sobre información personal de internos ",-1),_e=a("span",{class:"sub-menu__option--title"},"FP 5 Antes de estar en esta cárcel, ¿había estado preso(a)?",-1),pe=a("span",{class:"sub-menu__option--text"},null,-1),de=a("span",{class:"sub-menu__option--title"},"FP 6 ¿Cuánto tiempo lleva en esta cárcel?",-1),me=a("span",{class:"sub-menu__option--text"},null,-1),ve=a("span",{class:"sub-menu__option--title"},"FP 7 ¿Qué año saldría en libertad (cumplido)?",-1),fe=a("span",{class:"sub-menu__option--text"},null,-1),be=a("span",{class:"sub-menu__option--title"}," FP 1 ¿Cuántos años tiene actualmente?",-1),he=a("span",{class:"sub-menu__option--text"},null,-1),ge=a("span",{class:"sub-menu__option--title"},"FP 2 Cuando niño, ¿estuvo en algún Hogar de menores o del Sename?",-1),ye=a("span",{class:"sub-menu__option--text"},null,-1),Pe=a("span",{class:"sub-menu__option--title"},"FP 3 ¿Hasta qué curso llegó (en la calle)?",-1),Ce=a("span",{class:"sub-menu__option--text"},null,-1),Ve=a("span",{class:"sub-menu__option--title"},"FP 4 ¿Es chileno?",-1),Ie=a("span",{class:"sub-menu__option--text"},null,-1),Fe=1,He={__name:"trayectoria",setup(ke){const w=p("Trayectoria de los internos"),c=p(!1),C=L(),u=p([0,0,0,0,0,0]),g=p(0),_=p(1),v=p(null),f=p(null),x=()=>{_.value=1},E=e=>{let o=0,t=0;for(let s=0;s<e.length;s++)e[s].value>0&&(o+=e[s].value,t++);u.value[0]=parseInt(o/t)},A=e=>{let o=0,t=0;for(let i=0;i<e.length;i++)e[i].value===1&&o++,e[i].value===-1&&(t+=e[i].value*-1);const s=e.length-t;u.value[1]=b(o*100/s)},$=e=>{let o=0,t=0;for(let i=0;i<e.length;i++)e[i].value===-1?t+=e[i].value*-1:o+=e[i].value;const s=e.length-t;u.value[2]=parseInt(o/s)},H=e=>{let o=0,t=0;for(let i=0;i<e.length;i++)e[i].value===1&&o++,e[i].value===-1&&(t+=e[i].value*-1);const s=e.length-t;u.value[3]=b(o*100/s)},R=e=>{let o=0,t=0;for(let i=0;i<e.length;i++)e[i].value===1&&o++,e[i].value===-1&&(t+=e[i].value*-1);const s=e.length-t;u.value[4]=b(o*100/s)},B=e=>{let o=0,t=0;for(let s=0;s<e.length;s++)e[s].value===1&&(o+=0,t++),e[s].value===2&&(o+=1,t++),e[s].value===3&&(o+=1.6,t++),e[s].value===4&&(o+=2.6,t++);u.value[5]=b(o/t)},N=e=>{let o=0,t=0;for(let s=0;s<e.length;s++)e[s].value===1&&(o+=2022,t++),e[s].value===2&&(o+=2023,t++),e[s].value===3&&(o+=2024,t++),e[s].value===4&&(o+=2025,t++);u.value[6]=parseInt(o/t)};Q([]);const V=async e=>{c.value=!0,_.value=e,c.value=!1},S=async()=>{let e={categoryId:7,lastPeriod:!0};return g.value||(g.value=await F(e)),e={categoryId:7,historyId:g.value.id,embedDetail:!0,subCategoryId:23},v.value&&(e.regionId=v.value),f.value&&(e.carcelId=f.value),e},T=(e,o)=>{o===124&&E(e),o===125&&A(e),o===126&&$(e),o===127&&H(e),o===128&&R(e),o===129&&B(e),o===130&&N(e)},z=async(e=124,o=130)=>{try{c.value=!0;const t=await S();let s=await F(t),i=null;for(let y=e;y<=o;y++){const I=y,M=s.items.filter(q=>q.dimensionId===I);T(M,I)}}catch(t){console.log(t)}},b=e=>e?Math.round(e*100)/100:0;return j(async()=>{c.value=!0;const e=C.user.restrictions.find(t=>t.typeId===2),o=C.user.restrictions.find(t=>t.typeId===3);e?v.value=parseInt(e.restriction):o?f.value=parseInt(o.restriction):(f.value=null,v.value=null),await z(),c.value=!1}),(e,o)=>{const t=G("RouterLink");return d(),P(K,{class:"panel-trayectoria-internos"},{default:n(()=>[l(U,{title:w.value,"section-value":Fe},null,8,["title"]),!c.value&&_.value!==0?(d(),h("div",W,[l(J,{class:"btn-volver",title:"Volver",onExecuteAction:x,disabled:e.blockButton},null,8,["disabled"])])):m("",!0),l(O,{"active-spin":c.value},null,8,["active-spin"]),!c.value&&u.value.length>0?(d(),h("div",X,[a("div",Y,[_.value==1?(d(),h("div",Z,[l(r,{class:"section-donut",title:"FP 1 ¿Cuántos años tiene actualmente?",subtitle:"","point-value":u.value[0],type:2},{default:n(()=>[l(t,{to:"edadInternos",class:"sub-menu--option white btn-small"},{default:n(()=>[D]),_:1})]),_:1},8,["point-value"]),l(r,{class:"section-donut",title:"FP 2 Cuando niño, ¿estuvo en algún Hogar de menores o del Sename?",subtitle:"","point-value":u.value[1],type:2},{default:n(()=>[l(t,{to:"hogarMenores",class:"sub-menu--option white btn-small"},{default:n(()=>[ee]),_:1})]),_:1},8,["point-value"]),l(r,{class:"section-donut",title:"FP 3 ¿Hasta qué curso llegó (en la calle)?",subtitle:"","point-value":u.value[2],type:2},{default:n(()=>[l(t,{to:"nivelEducacional",class:"sub-menu--option white btn-small"},{default:n(()=>[te]),_:1})]),_:1},8,["point-value"]),l(r,{class:"section-donut",title:"FP 4 ¿Es chileno?",subtitle:"","point-value":u.value[3],type:2},{default:n(()=>[l(t,{to:"nacionalidadChilena",class:"sub-menu--option white btn-small"},{default:n(()=>[oe]),_:1})]),_:1},8,["point-value"])])):m("",!0),_.value==2?(d(),h("div",se,[l(r,{class:"section-donut",title:"Información personal",subtitle:"Consulta sobre información personal de internos","point-value":0},{default:n(()=>[l(t,{to:"trayectoriaInfoPersonal",class:"sub-menu--option white btn-small"},{default:n(()=>[ne]),_:1})]),_:1}),l(r,{class:"section-donut",title:"FP 5 Antes de estar en esta cárcel, ¿había estado preso(a)?",subtitle:"","point-value":u.value[4],type:2},{default:n(()=>[l(t,{to:"trayectoriaReinsidencia",class:"sub-menu--option white btn-small"},{default:n(()=>[le]),_:1})]),_:1},8,["title","point-value"]),l(r,{class:"section-donut",title:"FP 6 ¿Cuánto tiempo lleva en esta cárcel?",subtitle:"","point-value":u.value[5],type:2},{default:n(()=>[l(t,{to:"tiempoEncierro",class:"sub-menu--option white btn-small"},{default:n(()=>[ae]),_:1})]),_:1},8,["point-value"]),l(r,{class:"section-donut",title:"FP 7 ¿Qué año saldría en libertad (cumplido)?",subtitle:"","point-value":u.value[6],type:2},{default:n(()=>[l(t,{to:"terminoEncierro",class:"sub-menu--option white btn-small"},{default:n(()=>[ie]),_:1})]),_:1},8,["title","point-value"])])):m("",!0)]),a("div",ue,[_.value!==2?(d(),P(k,{key:0,class:"card-information",onClick:o[0]||(o[0]=s=>V(2))},{default:n(()=>[l(t,{to:"#",class:"sub-menu--option options-bottom"},{default:n(()=>[ce,re]),_:1}),l(t,{to:"#",class:"sub-menu--option options-bottom"},{default:n(()=>[_e,pe]),_:1}),l(t,{to:"#",class:"sub-menu--option options-bottom"},{default:n(()=>[de,me]),_:1}),l(t,{to:"#",class:"sub-menu--option options-bottom"},{default:n(()=>[ve,fe]),_:1})]),_:1})):m("",!0),_.value!==1?(d(),P(k,{key:1,class:"card-information",onClick:o[1]||(o[1]=s=>V(1))},{default:n(()=>[l(t,{to:"#",class:"sub-menu--option options-bottom"},{default:n(()=>[be,he]),_:1}),l(t,{to:"#",class:"sub-menu--option options-bottom"},{default:n(()=>[ge,ye]),_:1}),l(t,{to:"#",class:"sub-menu--option options-bottom"},{default:n(()=>[Pe,Ce]),_:1}),l(t,{to:"#",class:"sub-menu--option options-bottom"},{default:n(()=>[Ve,Ie]),_:1})]),_:1})):m("",!0)])])):m("",!0)]),_:1})}}};export{He as default};
