import{_ as k}from"./CSpinner-bfff3c1b.js";import{i as L,h as r,r as h,o as y,f as g,j as d,_ as N,g as p,b as c,a as T}from"./index-81990198.js";import{_ as V}from"./CHeaderBar-c05e4acb.js";import{_ as q}from"./CFilterbar-cf066549.js";import{_ as x}from"./CCard-45074258.js";import{_ as B}from"./CColunmChart-e1a7329a.js";import{a as M}from"./dimensionHistory-2874fc68.js";import"./CSelect.vue_vue_type_style_index_0_lang-f7ab962f.js";import"./CSelect-97c825b8.js";import"./carceles-fea03c35.js";import"./api-ec658a74.js";import"./exporting-32b7d0aa.js";const O={class:"regimen-carcel"},X={class:"chart-section"},Y=c("span",{class:"card-title"},"P6 ¿Cuánto tiempo lleva en esta cárcel? ",-1),z=c("span",{class:"question--value"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam ",-1),H=c("span",{class:"card-title"},"Pregunta",-1),W=c("span",{class:"question--value"},"FP 6 ¿Cuánto tiempo lleva en esta cárcel? ",-1),f=7,ne={__name:"tiempoEncierro",setup(j){const t=L(),n=r(!1),b=r("Trayectoria / ¿Cuánto tiempo lleva en esta cárcel?"),S=r({categories:["menos de 6 meses","entre 6 meses y 1 año","entre 1 y 2 años","más de 2 años","No asignado"],crosshair:!1}),A=r({min:0,allowDecimals:!1,title:{text:"Suma por categoría"}}),w=r({column:{pointPadding:.2,borderWidth:3}}),I=r({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),C=e=>{let a=0,s=0,u=0,m=0,i=0;for(let o=0;o<e.length;o++)e[o].value===1&&a++,e[o].value===2&&s++,e[o].value===3&&u++,e[o].value===4&&m++,e[o].value===-1&&(i+=e[o].value*-1);return[a,s,u,m,i]},l=h([]),F=(e,a,s)=>h({id:e,name:a,data:s,dataLabels:{enabled:!0,color:"#fff",align:"center",y:70,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),P=async e=>{n.value=!0;const a=l.filter(s=>s.id!==e);l.splice(0,l.length),a.map(s=>l.push(s)),await t.sleep(50),n.value=!1},_=async(e,a,s)=>{var u,m;try{let i=((u=t==null?void 0:t.penitenciaria)==null?void 0:u.id)??null,o=((m=t==null?void 0:t.penitenciaria)==null?void 0:m.description)??null,v=t.historyId;if(s&&(i=e,o=a),v&&i){n.value=!0;let D=await M({historyId:v,carcelId:i,categoryId:f,subCategoryId:23,embedDetail:!0,dimensionId:129});const E=C(D.items);l.push(F(i,o,E))}}catch(i){console.log(i)}finally{s||(n.value=!1)}},$=async()=>{n.value=!0,t.carcelesSelected&&t.carcelesSelected.length>0&&await Promise.all(t.carcelesSelected.map(async e=>await _(e.id,e.description,!0))),n.value=!1};return(e,a)=>(y(),g(N,null,{default:d(()=>[p(V,{title:b.value,"section-value":f},null,8,["title"]),p(k,{"active-spin":n.value},null,8,["active-spin"]),p(q,{baseFilter:f,multipleDisabled:!1,onExecuteMount:$,onExecuteAction:_,onExecuteRemove:P}),c("div",O,[c("div",X,[p(x,{class:"card-information"},{default:d(()=>[Y,z]),_:1}),n.value?T("",!0):(y(),g(B,{key:0,optionsAxisX:S.value,optionsAxisY:A.value,plotOptions:w.value,tooltip:I.value,series:l},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),p(x,{class:"card-preguntas"},{default:d(()=>[H,W]),_:1})])]),_:1}))}};export{ne as default};
