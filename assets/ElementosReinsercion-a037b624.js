import{g as t,h as A,i as L,o as D,f as V,j as d,_ as U,s as x,x as M,m as n,n as $,b as s,k as R}from"./index-f528de0d.js";import{_ as h,a as k}from"./CChartDonutSection-7774fca5.js";import{_ as F}from"./CHeaderBar-27c2be18.js";import{_ as G}from"./CTable-41df95af.js";import{s as B}from"./filterSituacion-0184478a.js";const N={class:"information-section-program"},j=s("span",{class:"sub-menu__option--title"}," Ver más ",-1),H=s("span",{class:"sub-menu__option--title"}," Ver más ",-1),q={class:"information__section"},z=s("span",{class:"card-title"},"Programas",-1),K=s("div",{class:"card-subsection"},[s("span",{class:"card-subtitle"},"PPL :"),s("span",null," Programa de reinserción social para personas privadas de libertad")],-1),O=s("div",{class:"card-subsection"},[s("span",{class:"card-subtitle"},"PRS :"),s("span",null," Programa Ministerio del Interior")],-1),Q=s("div",{class:"card-subsection"},[s("span",{class:"card-subtitle"},"CET C :"),s("span",null," CET Cerrado")],-1),W=s("div",{class:"card-subsection"},[s("span",{class:"card-subtitle"},"CET S :"),s("span",null," CET Semiabierto")],-1),X=s("div",{class:"card-subsection"},[s("span",{class:"card-subtitle"},"CTA :"),s("span",null," Centro de tratamiento de adicciones")],-1),Y=s("div",{class:"card-subsection"},[s("span",{class:"card-subtitle"},"SSJJ :"),s("span",null," Secciones Juveniles")],-1),Z=s("div",{class:"card-subsection"},[s("span",{class:"card-subtitle"},"CJ :"),s("span",null," Creciendo Juntos")],-1),aa={class:"content__section table-program"},m=4,ca={__name:"ElementosReinsercion",setup(sa){const v=B(),i=t(!1);t({id:15,description:"Región Metropolitana de Santiago"});const w=t([]),y=t("Elementos de reinserción"),C=t(null),b=t(null),P=t([{rowReference:"region",description:"Región",class:"region"},{rowReference:"centro",description:"Establecimiento penal"},{rowReference:"programPPL",description:"PPL"},{rowReference:"programPLS",description:"PRS"},{rowReference:"programCETC",description:"CET C"},{rowReference:"programCETSA",description:"CET SA"},{rowReference:"programCTA",description:"CTA"},{rowReference:"programSSJJ",description:"SSJJ"},{rowReference:"programCJ",description:"CJ"},{rowReference:"total",description:"Total en funcionamiento"}]),S=t([]),T=async r=>{if(!v.listadoRegiones.length>0){let a=await x();w.value=a,v.setRegionesList(a)}},I=async(r,a,l)=>{try{i.value=!0;let g=await R({historyId:8,categoryId:m,subCategoryId:24});const o=[0,0,0,0];g.map(e=>{e.valueUsed===1&&(o[0]+=e.pound),e.valueUsed===2&&(o[1]+=e.pound),e.valueUsed===3&&(o[2]+=e.pound),e.valueUsed===4&&(o[3]+=e.pound)});let p=o[0]+o[2];const _=o.reduce((e,f)=>e+f,0);C.value=parseFloat((p/_*100).toFixed(1))??0}catch(u){console.log(u)}finally{l||(i.value=!1)}},E=async(r,a,l)=>{try{let g=await R({historyId:8,categoryId:m,subCategoryId:25}),o=0,p=0,_=0;g.map(c=>{c.valueUsed===1?o+=c.pound:c.valueUsed===3?p+=c.pound:(c.valueUsed===2||c.valueUsed===4)&&(_+=c.pound)});const e=o+p,f=e+_;b.value=parseFloat((e/f*100).toFixed(1))}catch(u){console.log(u)}finally{l||(i.value=!1)}},J=async()=>{try{i.value=!0;const r=await M();S.value=r.map(a=>(a.region={data:a.region.substring(0,3),class:"region"},a.programPPL=a.programPPL?{data:".",class:"data-circle"}:"",a.programPLS=a.programPLS?{data:".",class:"data-circle"}:"",a.programCETC=a.programCETC?{data:".",class:"data-circle"}:"",a.programCETSA=a.programCETSA?{data:".",class:"data-circle"}:"",a.programCTA=a.programCTA?{data:".",class:"data-circle"}:"",a.programSSJJ=a.programSSJJ?{data:".",class:"data-circle"}:"",a.programCJ=a.programCJ?{data:".",class:"data-circle"}:"",a.total={data:a.total,class:"value-total"},a.promedio={data:a.promedio,class:"value-total"},a)),await I(),await E(),i.value=!1}catch(r){console.log(r)}};return A(async()=>{await T(),await J()}),(r,a)=>{const l=L("RouterLink");return D(),V(U,{class:"contenedor-reinsercion"},{default:d(()=>[n(F,{title:y.value,"section-value":m},null,8,["title"]),n($,{"active-spin":i.value},null,8,["active-spin"]),s("div",N,[n(h,{class:"section-donut",title:"Reincidentes por recinto","point-value":C.value,type:2,"is-percent":!0},{default:d(()=>[n(l,{to:"situacionReincidencia",class:"sub-menu--option white btn-small"},{default:d(()=>[j]),_:1})]),_:1},8,["point-value"]),n(h,{class:"section-donut",title:"Aplicación IGI","point-value":b.value,type:2,"is-percent":!0},{default:d(()=>[n(l,{to:"regimenProcesal",class:"sub-menu--option white btn-small"},{default:d(()=>[H]),_:1})]),_:1},8,["point-value"]),s("div",q,[n(k,{class:"card-information card-program"},{default:d(()=>[z,K,O,Q,W,X,Y,Z]),_:1})])]),s("div",aa,[n(G,{columns:P.value,rows:S.value},null,8,["columns","rows"])])]),_:1})}}};export{ca as default};
