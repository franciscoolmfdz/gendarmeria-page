import{u as M,g as r,r as x,o as S,f as I,j as D,_ as N,m as v,n as z,b as d,a as B,l as L}from"./index-77660dd1.js";import{_ as O}from"./CHeaderBar-420a9954.js";import{_ as X}from"./CFilterbar-697d0ee8.js";import{_ as Y}from"./CCard-f0f378fd.js";import{_ as H}from"./subSideNav-4b706314.js";import{_ as W}from"./CColunmChart-2227accc.js";import"./CButton-f7aa2ad4.js";import"./CChartDonutSection-366c452d.js";const j={class:"chart-section-principal"},q={class:"edad-internos"},R={class:"chart-section"},G=d("span",{class:"card-title"},"Pregunta",-1),J=d("span",{class:"question--value"},"1. ¿Cuántos años tiene actualmente?",-1),h=7,oe={__name:"edadInternos",setup(K){const a=M(),l=r(!1),y=r("Trayectoria / ¿Cuántos años tiene actualmente?"),g=r(""),w=r({categories:["Menor a 20 años","Entre 20 a 30 años","Entre 30 a 40 años","Entre 40 a 50 años","Entre 50 a 60 años","Mayor a 60 años","No Asignado"],crosshair:!1}),C=r({min:0,allowDecimals:!1,title:{text:"Suma por categoría"}}),A=r({column:{pointPadding:.2,borderWidth:3}}),V=r({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}%</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),c=e=>e?Math.round(e*100)/100:0,$=e=>{let o=0,s=0,p=0,m=0,n=0,f=0,_=0,i=0;for(let t=0;t<e.length;t++)e[t].value>0&&(_+=e[t].value,i++),e[t].value<20&&e[t].value>0&&o++,e[t].value>=20&&e[t].value<30&&s++,e[t].value>=30&&e[t].value<40&&p++,e[t].value>=40&&e[t].value<50&&m++,e[t].value>=50&&e[t].value<=60&&n++,e[t].value>60&&f++;return g.value=parseInt(_/i),[c(o*100/i),c(s*100/i),c(p*100/i),c(m*100/i),c(n*100/i),c(f*100/i)]},u=x([]),F=(e,o,s)=>x({id:e,name:o,data:s,dataLabels:{enabled:!0,color:"#fff",align:"center",x:-15,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),T=async e=>{l.value=!0;const o=u.filter(s=>s.id!==e);u.splice(0,u.length),o.map(s=>u.push(s)),await a.sleep(50),l.value=!1},b=async(e,o,s)=>{var p,m;try{let n=((p=a==null?void 0:a.penitenciaria)==null?void 0:p.id)??null,f=((m=a==null?void 0:a.penitenciaria)==null?void 0:m.description)??null,_=a.historyId;if(s&&(n=e,f=o),_&&n){l.value=!0;let t=await L({historyId:_,carcelId:n,categoryId:h,subCategoryId:23,embedDetail:!0,dimensionId:124});const k=$(t.items);u.push(F(n,f,k))}}catch(n){console.log(n)}finally{s||(l.value=!1)}},P=async()=>{l.value=!0,a.carcelesSelected&&a.carcelesSelected.length>0&&await Promise.all(a.carcelesSelected.map(async e=>await b(e.id,e.description,!0))),l.value=!1};return(e,o)=>(S(),I(N,null,{default:D(()=>[v(O,{title:y.value,"section-value":h},null,8,["title"]),v(z,{"active-spin":l.value},null,8,["active-spin"]),v(X,{baseFilter:h,multipleDisabled:!1,onExecuteMount:P,onExecuteAction:b,onExecuteRemove:T}),d("div",j,[v(H,{class:"subsection-trayectoria",title:y.value,"section-value":h,pointValue:g.value,pointTitle:"1. ¿Cuántos años tiene actualmente?",pointSubtitle:""},null,8,["title","pointValue","pointTitle"]),d("div",q,[d("div",R,[l.value?B("",!0):(S(),I(W,{key:0,chartType:"bar",optionsAxisX:w.value,optionsAxisY:C.value,plotOptions:A.value,tooltip:V.value,series:u},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),v(Y,{class:"card-preguntas"},{default:D(()=>[G,J]),_:1})])])]),_:1}))}};export{oe as default};
