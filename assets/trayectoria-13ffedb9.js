import{_ as G}from"./CButton-1d70cd49.js";import{g as f,u as K,h as O,i as Q,o as d,f as V,j as l,_ as U,l as N,m as a,c as h,a as v,n as W,b as i}from"./index-c8938612.js";import{_}from"./CChartDonutSection-e94e3819.js";import{_ as X}from"./CHeaderBar-52290071.js";import{_ as x}from"./CCard-96aa4865.js";const Y={key:0,class:"c-option-volver"},Z={key:1,class:"principal-section section-internos"},D={class:"principal-section"},ee={key:0,class:"principal-section__top top-position-one"},te=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),oe=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),se=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),ne=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),le={key:1,class:"principal-section__top top-position-two"},ae=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),ie=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),ue=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),ce={key:2,class:"principal-section__top top-position-two"},re=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),_e=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),pe=i("span",{class:"sub-menu__option--title"}," Ver más ",-1),de={class:"principal-section__bottom"},me=i("span",{class:"sub-menu__option--title"},"5. Reincidencia en la Cárcel",-1),ve=i("span",{class:"sub-menu__option--text"},null,-1),fe=i("span",{class:"sub-menu__option--title"},"6. Tiempo en Cárcel",-1),be=i("span",{class:"sub-menu__option--text"},null,-1),he=i("span",{class:"sub-menu__option--title"},"7.Año para salir en libertad",-1),ge=i("span",{class:"sub-menu__option--text"},null,-1),ye=i("span",{class:"sub-menu__option--title"}," 1. Edad del Interno",-1),Ve=i("span",{class:"sub-menu__option--text"},null,-1),Ce=i("span",{class:"sub-menu__option--title"},"2. Residió en Sename cuando niño",-1),Me=i("span",{class:"sub-menu__option--text"},null,-1),ke=i("span",{class:"sub-menu__option--title"},"3. Nivel educacional (en la calle)",-1),we=i("span",{class:"sub-menu__option--text"},null,-1),xe=i("span",{class:"sub-menu__option--title"},"4. Nacionalidad del Interno",-1),Ae=i("span",{class:"sub-menu__option--text"},null,-1),Ne=i("span",{class:"sub-menu__option--title"},"P. Tipo de carcel",-1),Ie=i("span",{class:"sub-menu__option--text"},null,-1),Pe=i("span",{class:"sub-menu__option--title"},"N. Número programa",-1),Te=i("span",{class:"sub-menu__option--text"},null,-1),Ee=i("span",{class:"sub-menu__option--title"},"J. Tipo de programa",-1),Re=i("span",{class:"sub-menu__option--text"},null,-1),$e=1,Fe={__name:"trayectoria",setup(Be){const I=f("Antecedentes y trayectorias"),m=f(!1),A=K(),u=f([0,0,0,0,0,0]),C=f(0),p=f(1),g=f(null),y=f(null),P=()=>{p.value=1},T=e=>{let o=0,t=0;for(let s=0;s<e.length;s++)e[s].value>0&&(o+=e[s].value,t++);u.value[0]=Math.round(o/t)},E=e=>{let o=0,t=0;for(let n=0;n<e.length;n++)e[n].value===1&&o++,e[n].value===-1&&(t+=e[n].value*-1);const s=e.length-t;u.value[1]=Math.round(k(o*100/s))},R=e=>{let o=0,t=0;for(let n=0;n<e.length;n++)e[n].value===-1?t+=e[n].value*-1:o+=e[n].value;const s=e.length-t;u.value[2]=Math.round(o/s)},$=e=>{let o=0,t=0;for(let n=0;n<e.length;n++)e[n].value===1&&o++,e[n].value===-1&&(t+=e[n].value*-1);const s=e.length-t;u.value[3]=Math.round(k(o*100/s))},B=e=>{let o=0,t=0;for(let n=0;n<e.length;n++)e[n].value===1&&o++,e[n].value===-1&&(t+=e[n].value*-1);const s=e.length-t;u.value[4]=Math.round(k(o*100/s))},J=e=>{let o=0,t=0,s=0,n=0,b=0,c=0;for(let r=0;r<e.length;r++)e[r].value===1&&(o++,c++),e[r].value===2&&(t++,c++),e[r].value===3&&(s++,c++),e[r].value===4&&(n++,c++),e[r].value===-1&&(b+=e[r].value*-1);const w=[Math.round(o*100/c),Math.round(t*100/c),Math.round(s*100/c),Math.round(n*100/c)];u.value[5]=Math.max(...w)},S=e=>{let o=0,t=0;for(let s=0;s<e.length;s++)e[s].value===1&&(o+=2022,t++),e[s].value===2&&(o+=2023,t++),e[s].value===3&&(o+=2024,t++),e[s].value===4&&(o+=2025,t++);u.value[6]=Math.round(o/t)},z=e=>{let o=0,t=0;for(let n=0;n<e.length;n++)e[n].value===0&&o++,e[n].value===1&&t++;const s=o+t;u.value[7]=Math.round(o*100/s)},H=e=>{let o=0,t=0;for(let s=0;s<e.length;s++)e[s].value>0&&e[s].value>o&&(o+=e[s].value,t++);u.value[8]=Math.round(o/t)},j=e=>{let o=0,t=0,s=0;for(let n=0;n<e.length;n++)e[n].value==1&&o++,e[n].value==2&&t++,e[n].value==3&&s++;o>=t&&o>=s?u.value[9]=1:t>=o&&t>=s?u.value[9]=2:u.value[9]=4},M=async e=>{m.value=!0,p.value=e,m.value=!1},F=async()=>{let e={categoryId:7,lastPeriod:!0};return C.value||(C.value=await N(e)),e={categoryId:7,historyId:C.value.id,embedDetail:!0,subCategoryId:23},g.value&&(e.regionId=g.value),y.value&&(e.carcelId=y.value),e},L=(e,o)=>{o===124&&T(e),o===125&&E(e),o===126&&R(e),o===127&&$(e),o===128&&B(e),o===129&&J(e),o===130&&S(e),o===136&&z(e),o===137&&H(e),o===138&&j(e)},q=async(e=124,o=138)=>{try{m.value=!0;const t=await F();let s=await N(t),n=null;for(let b=e;b<=o;b++){const c=b,w=s.items.filter(r=>r.dimensionId===c);L(w,c)}}catch(t){console.log(t)}},k=e=>e?Math.round(e*100)/100:0;return O(async()=>{m.value=!0;const e=A.user.restrictions.find(t=>t.typeId===2),o=A.user.restrictions.find(t=>t.typeId===3);e?g.value=parseInt(e.restriction):o?y.value=parseInt(o.restriction):(y.value=null,g.value=null),await q(),m.value=!1}),(e,o)=>{const t=Q("RouterLink");return d(),V(U,{class:"panel-trayectoria-internos"},{default:l(()=>[a(X,{title:I.value,"section-value":$e},null,8,["title"]),!m.value&&p.value!==0?(d(),h("div",Y,[a(G,{class:"btn-volver",title:"Volver",onExecuteAction:P,disabled:e.blockButton},null,8,["disabled"])])):v("",!0),a(W,{"active-spin":m.value},null,8,["active-spin"]),!m.value&&u.value.length>0?(d(),h("div",Z,[i("div",D,[p.value==1?(d(),h("div",ee,[a(_,{class:"section-donut",title:"1. Edad del Interno",subtitle:"","point-value":u.value[0],type:2},{default:l(()=>[a(t,{to:"edadInternos",class:"sub-menu--option white btn-small"},{default:l(()=>[te]),_:1})]),_:1},8,["title","point-value"]),a(_,{class:"section-donut",title:"2. Residió en Sename cuando niño",subtitle:"","point-value":u.value[1],type:2,"is-percent":!0},{default:l(()=>[a(t,{to:"hogarMenores",class:"sub-menu--option white btn-small"},{default:l(()=>[oe]),_:1})]),_:1},8,["title","point-value"]),a(_,{class:"section-donut",title:"3. Nivel educacional (en la calle)",subtitle:"","point-value":u.value[2],type:3},{default:l(()=>[a(t,{to:"nivelEducacional",class:"sub-menu--option white btn-small"},{default:l(()=>[se]),_:1})]),_:1},8,["title","point-value"]),a(_,{class:"section-donut",title:"4. Nacionalidad del Interno",subtitle:"","point-value":u.value[3],type:2,"is-percent":!0},{default:l(()=>[a(t,{to:"nacionalidadChilena",class:"sub-menu--option white btn-small"},{default:l(()=>[ne]),_:1})]),_:1},8,["title","point-value"])])):v("",!0),p.value==2?(d(),h("div",le,[a(_,{class:"section-donut",title:"5. Reincidencia en la Cárcel",subtitle:"","point-value":u.value[4],type:2,"is-percent":!0},{default:l(()=>[a(t,{to:"trayectoriaReinsidencia",class:"sub-menu--option white btn-small"},{default:l(()=>[ae]),_:1})]),_:1},8,["title","point-value"]),a(_,{class:"section-donut",title:"6. Tiempo en Cárcel",subtitle:"","point-value":u.value[5],type:2,"is-percent":!0},{default:l(()=>[a(t,{to:"tiempoEncierro",class:"sub-menu--option white btn-small"},{default:l(()=>[ie]),_:1})]),_:1},8,["title","point-value"]),a(_,{class:"section-donut",title:"7. Año para salir en libertad",subtitle:"","point-value":u.value[6],type:2},{default:l(()=>[a(t,{to:"terminoEncierro",class:"sub-menu--option white btn-small"},{default:l(()=>[ue]),_:1})]),_:1},8,["title","point-value"])])):v("",!0),p.value==3?(d(),h("div",ce,[a(_,{class:"section-donut",title:"P. Tipo de carcel",subtitle:"","point-value":u.value[7],type:2,"is-percent":!0},{default:l(()=>[a(t,{to:"tipoCarcel",class:"sub-menu--option white btn-small"},{default:l(()=>[re]),_:1})]),_:1},8,["title","point-value"]),a(_,{class:"section-donut",title:"N. Número de programas",subtitle:"","point-value":u.value[8],type:4},{default:l(()=>[a(t,{to:"numeroProgramas",class:"sub-menu--option white btn-small"},{default:l(()=>[_e]),_:1})]),_:1},8,["title","point-value"]),a(_,{class:"section-donut",title:"J. Tipo de programa",subtitle:"","point-value":u.value[9],type:4},{default:l(()=>[a(t,{to:"tipoPrograma",class:"sub-menu--option white btn-small"},{default:l(()=>[pe]),_:1})]),_:1},8,["title","point-value"])])):v("",!0)]),i("div",de,[p.value!==2?(d(),V(x,{key:0,class:"card-information",onClick:o[0]||(o[0]=s=>M(2))},{default:l(()=>[a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[me,ve]),_:1}),a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[fe,be]),_:1}),a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[he,ge]),_:1})]),_:1})):v("",!0),p.value!==1?(d(),V(x,{key:1,class:"card-information",onClick:o[1]||(o[1]=s=>M(1))},{default:l(()=>[a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[ye,Ve]),_:1}),a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[Ce,Me]),_:1}),a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[ke,we]),_:1}),a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[xe,Ae]),_:1})]),_:1})):v("",!0),p.value!==3?(d(),V(x,{key:2,class:"card-information",onClick:o[2]||(o[2]=s=>M(3))},{default:l(()=>[a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[Ne,Ie]),_:1}),a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[Pe,Te]),_:1}),a(t,{to:"#",class:"sub-menu--option options-bottom"},{default:l(()=>[Ee,Re]),_:1})]),_:1})):v("",!0)])])):v("",!0)]),_:1})}}};export{Fe as default};
