import{u as N,g as c,r as g,o as b,f as x,j as S,_ as P,m,n as z,b as f,a as B,l as D}from"./index-77660dd1.js";import{_ as L}from"./CHeaderBar-420a9954.js";import{_ as O}from"./CFilterbar-697d0ee8.js";import{_ as Q}from"./subSideNav-4b706314.js";import{_ as X}from"./CCard-f0f378fd.js";import{_ as Y}from"./CColunmChart-2227accc.js";import"./CButton-f7aa2ad4.js";import"./CChartDonutSection-366c452d.js";const H={class:"chart-section-principal"},W={class:"termino-encierro"},j={class:"chart-section"},q=f("span",{class:"card-title"},"Pregunta",-1),J=f("span",{class:"question--value"},"7. ¿Qué año saldría en libertad (cumplido)?",-1),_=7,ie={__name:"terminoEncierro",setup(M){const t=N(),l=c(!1),v=c("Trayectoria / ¿Qué año saldría en libertad (cumplido)?"),h=c(""),w=c({categories:["2022","2023","2024","2025 o después","No Asignado"],crosshair:!1}),A=c({min:0,allowDecimals:!1,title:{text:"Suma por categoría"}}),I=c({column:{pointPadding:.2,borderWidth:3}}),$=c({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),E=e=>{let i=0,a=0,p=0,d=0,o=0,n=0,r=0;for(let s=0;s<e.length;s++)e[s].value===1&&(i++,n+=2022,r++),e[s].value===2&&(a++,n+=2023,r++),e[s].value===3&&(p++,n+=2024,r++),e[s].value===4&&(d++,n+=2027,r++),e[s].value===-1&&(o+=e[s].value*-1);return h.value=parseInt(n/r),[i,a,p,d,o]},u=g([]),F=(e,i,a)=>g({id:e,name:i,data:a,dataLabels:{enabled:!0,color:"#fff",align:"center",x:-15,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),T=async e=>{l.value=!0;const i=u.filter(a=>a.id!==e);u.splice(0,u.length),i.map(a=>u.push(a)),await t.sleep(50),l.value=!1},y=async(e,i,a)=>{var p,d;try{let o=((p=t==null?void 0:t.penitenciaria)==null?void 0:p.id)??null,n=((d=t==null?void 0:t.penitenciaria)==null?void 0:d.description)??null,r=t.historyId;if(a&&(o=e,n=i),r&&o){l.value=!0;let C=await D({historyId:r,carcelId:o,categoryId:_,subCategoryId:23,embedDetail:!0,dimensionId:130});const k=E(C.items);u.push(F(o,n,k))}}catch(o){console.log(o)}finally{a||(l.value=!1)}},V=async()=>{l.value=!0,t.carcelesSelected&&t.carcelesSelected.length>0&&await Promise.all(t.carcelesSelected.map(async e=>await y(e.id,e.description,!0))),l.value=!1};return(e,i)=>(b(),x(P,null,{default:S(()=>[m(L,{title:v.value,"section-value":_},null,8,["title"]),m(z,{"active-spin":l.value},null,8,["active-spin"]),m(O,{baseFilter:_,multipleDisabled:!1,onExecuteMount:V,onExecuteAction:y,onExecuteRemove:T}),f("div",H,[m(Q,{class:"subsection-trayectoria",title:v.value,"section-value":_,pointValue:h.value,pointTitle:"7. ¿Qué año saldría en libertad (cumplido)?",pointSubtitle:"",type:2},null,8,["title","pointValue","pointTitle"]),f("div",W,[f("div",j,[l.value?B("",!0):(b(),x(Y,{key:0,chartType:"bar",optionsAxisX:w.value,optionsAxisY:A.value,plotOptions:I.value,tooltip:$.value,series:u},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),m(X,{class:"card-preguntas"},{default:S(()=>[q,J]),_:1})])])]),_:1}))}};export{ie as default};
