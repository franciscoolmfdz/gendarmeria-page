import{s as D,g as t,h as M,o as g,f as V,j as N,_ as L,y as Y,b as d,m as i,n as z,C as x,c as I,a as C,e as P}from"./index-c5d31a8d.js";import{_ as X}from"./CHeaderBar-cec87e9b.js";import{_ as J}from"./subSideNav-70a9c1a2.js";import{_ as k}from"./CButton-a8f847be.js";import{_ as U}from"./CTable-695503ac.js";import{_ as j}from"./CColunmChart-ccc1e024.js";import{g as G}from"./dimensionAggression-bca916c6.js";import{s as H}from"./filterSituacion-3453f87a.js";import"./CChartDonutSection-16a850f5.js";const K="/dmm/aggression-types",Q=async(T,v)=>D(K,"GET",null,v);const W={class:"content-header-eventos"},Z={class:"selected-options"},ee={key:0,class:"c-option-volver"},te={class:"table-section-principal"},se={class:"content__section"},A=3,de={__name:"registroViolencia",setup(T){const v=H(),w=t({id:15,description:"Región Metropolitana de Santiago"});t([]);const r=t({id:16,description:"CCP Colina 1"}),f=t([]),u=t({id:1,description:"N° de eventos de riñas en el período."}),l=t(!1),y=t([]),b=t("Estado situación carcelaria / Registro de eventos violentos"),R=t([{rowReference:"year",description:"Año"},{rowReference:"quantity",description:"Cantidad"}]),m=t(0),c=t([]),q=t({categories:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],crosshair:!1}),O=t({min:0,title:{text:"Registro violencia por año"}}),S=t({column:{stacking:"normal",dataLabels:{enabled:!0}}}),$=t({headerFormat:'<span style="font-size:10px">{point.x} ({series.userOptions.stack}): {point.stackTotal} </span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y}</b></td></tr></b>',footerFormat:'</table> <span style="font-size:10px">Total: {point.stackTotal}  </span>',useHTML:!0}),p=t([]),E=()=>{P.push("/situacionCarcelaria")},F=async()=>{let a={};f.value=await Y(a)},B=a=>{c.value=[],p.value=[],m.value=0;let e=0,s=0,n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _=0;_<a.length;_++){let o=a[_];m.value+=o.quantity,e||(e=o.year),o.year===e?(s+=o.quantity,n[o.month-1]=o.quantity):(c.value.push({year:e,quantity:s}),p.value.push({name:e,data:n,stack:"Registro violencia"}),e=o.year,o.year,s=o.quantity,n=[0,0,0,0,0,0,0,0,0,0,0,0],n[o.month-1]=o.quantity)}c.value.push({year:e,quantity:s}),p.value.push({name:e,data:n,stack:"Registro violencia"})},h=async()=>{var a,e;try{if(r.value){const s={carcelId:((a=r.value)==null?void 0:a.id)??r.value,aggresionTypeId:((e=u.value)==null?void 0:e.id)??u.value};l.value=!0;const n=await G(s);l.value=!1,B(n)}else c.value=[]}catch(s){console.log(s)}};return M(async()=>{l.value=!0,w.value=v.regionSelected.id,y.value=await Q(),await F(),await h(),l.value=!1}),(a,e)=>(g(),V(L,{class:"contenido-eventos"},{default:N(()=>[d("div",W,[i(X,{title:b.value,"section-value":A},null,8,["title"]),i(z,{"active-spin":l.value},null,8,["active-spin"]),d("div",Z,[i(x,{class:"select-carcel",options:f.value,modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s)},null,8,["options","modelValue"]),i(x,{class:"select-question",options:y.value,modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s)},null,8,["options","modelValue"]),i(k,{class:"btn-search",title:"",onExecuteAction:h})]),!l.value&&a.topPosition!==0?(g(),I("div",ee,[i(k,{class:"btn-volver",title:"Volver",onExecuteAction:E,disabled:a.blockButton},null,8,["disabled"])])):C("",!0)]),d("div",te,[i(J,{class:"subsection-eventos",title:b.value,"section-value":A,"point-label":m.value,"point-disabled":!0,pointTitle:"Registro de eventos violentos",pointSubtitle:""},null,8,["title","point-label"]),d("div",se,[l.value?C("",!0):(g(),V(j,{key:0,optionsAxisX:q.value,optionsAxisY:O.value,plotOptions:S.value,tooltip:$.value,series:p.value},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"])),i(U,{columns:R.value,rows:c.value},null,8,["columns","rows"])])])]),_:1}))}};export{de as default};
