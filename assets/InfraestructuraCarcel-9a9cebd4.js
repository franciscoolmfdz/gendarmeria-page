import{g as t,u as H,r as T,o as q,f as A,j as P,_ as W,l as d,m as X,b as o,a as Y,k as U}from"./index-1482005a.js";import{_ as j}from"./CHeaderBar-46b15ae3.js";import{_ as G}from"./CFilterbar-feb28bc4.js";import{_ as J}from"./subSideNav-9092fb98.js";import{_ as K}from"./CCard-582b8853.js";import{_ as Q}from"./CColunmChart-56bb9457.js";import"./CSelect.vue_vue_type_style_index_0_lang-024aa3d7.js";import"./CSelect-d1359523.js";import"./carceles-dec193d8.js";const Z={class:"chart-section-principal"},ee={class:"infraestructura-section"},te={class:"chart-section"},ae=o("span",{class:"card-title"},"Preguntas",-1),se=o("span",{class:"question--value"},"2.1 Aquí recibo una buena cantidad de comida",-1),oe=o("span",{class:"question--value"},"2.2 Cuento con un baño (wáter) decente ",-1),ne=o("span",{class:"question--value"},"2.3 Duermo en un lugar limpio ",-1),ie=o("span",{class:"question--value"},"2.4 En mi módulo hay una temperatura adecuada (ni mucho frío ni mucho calor) ",-1),le=o("span",{class:"question--value"},"2.5 Recibo comida en buen estado ",-1),ce=o("span",{class:"question--value"},"2.6 Recibo luz natural en mi celda o módulo ",-1),re=o("span",{class:"question--value"},"2.7 Mi celda tiene buena ventilación ",-1),f=1,ge={__name:"InfraestructuraCarcel",setup(ue){const n=t(!1),e=H(),_=t("Calidad de vida de los internos / Infrastructura carcel"),v=t(""),h=t(0),L=t({categories:["2.1","2.2","2.3","2.4","2.5","2.6","2.7"],crosshair:!1}),V=t({min:0,allowDecimals:!1,title:{text:"Escala de frecuencia"}}),$=t({column:{pointPadding:.2,borderWidth:3}}),E=t({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f} </b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),c=T([]),N=(a,r,i)=>T({id:a,name:r,data:i,dataLabels:{enabled:!0,color:"#fff",align:"center",x:20,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}});t({categories:["2.1","2.2","2.3","2.4","2.5","2.6","2.7"],crosshair:!1}),t({min:0,title:{text:"Respuestas por categoría"},stackLabels:{enabled:!0}}),t({column:{stacking:"normal",dataLabels:{enabled:!0}}}),t({headerFormat:"<b> Total: {point.x}</b><br/>",pointFormat:"<b>Penitenciaría: {series.stack} </b> <br/>{series.name}: {point.y}<br/>Total: {point.stackTotal}",useHTML:!0});const p=t([{name:"Siempre",data:[],stack:"Colina 1"},{name:"Casi siempre",data:[],stack:"Colina 1"},{name:"A veces",data:[],stack:"Colina 1"},{name:"Casi nunca",data:[],stack:"Colina 2"},{name:"Nunca",data:[],stack:"Colina 2"}]),O={enabled:!0,color:"#fff",align:"center",y:0,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}},b=a=>a?Math.round(a*100)/100:0,R=async a=>{n.value=!0;const r=c.filter(i=>i.id!==a);c.splice(0,c.length),r.map(i=>c.push(i)),await e.sleep(50),n.value=!1},y=async(a,r,i)=>{var g,x;try{let u=((g=e==null?void 0:e.penitenciaria)==null?void 0:g.id)??null,C=((x=e==null?void 0:e.penitenciaria)==null?void 0:x.description)??null,S=e.historyId;if(i&&(u=a,C=r),S&&u){n.value=!0;let k=await U({historyId:S,carcelId:u,categoryId:1,subCategoryId:2});const I=[];let w=k.filter(s=>s.poundUsed===1),D=0;w.map(s=>{const l=b(s==null?void 0:s.promPound);D+=l,I.push(l)}),h.value+=D/w.length;let M=b(h.value/e.carcelesSelected.length);v.value=M.toString(),c.push(N(u,C,I));let F=5;for(let s=0;s<=4;s++)p.value[s].stack=e.penitenciaria.description,p.value[s].dataLabels=O,p.value[s].data=k.filter(l=>l.valueUsed===F).sort((l,B)=>l.dimensionId-B.dimensionId).map(l=>l.value),F--}else for(let m=0;m<=4;m++)p.value[m].data=[]}catch(u){console.log(u)}finally{i||(n.value=!1)}},z=async()=>{n.value=!0,e.carcelesSelected&&e.carcelesSelected.length>0&&await Promise.all(e.carcelesSelected.map(async a=>await y(a.id,a.description,!0))),n.value=!1};return(a,r)=>(q(),A(W,null,{default:P(()=>[d(j,{title:_.value,"section-value":f},null,8,["title"]),d(X,{"active-spin":n.value},null,8,["active-spin"]),d(G,{baseFilter:f,onExecuteMount:z,multipleDisabled:!1,onExecuteAction:y,onExecuteRemove:R}),o("div",Z,[d(J,{title:_.value,"section-value":f,pointValue:v.value,pointTitle:"Infrastructura de la carcel",pointSubtitle:"Promedio respuestas Infrastructura de la carcel"},null,8,["title","pointValue"]),o("div",ee,[o("div",te,[n.value?Y("",!0):(q(),A(Q,{key:0,chartType:"bar",optionsAxisX:L.value,optionsAxisY:V.value,plotOptions:$.value,tooltip:E.value,series:c},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),d(K,{class:"card-preguntas"},{default:P(()=>[ae,se,oe,ne,ie,le,ce,re]),_:1})])])]),_:1}))}};export{ge as default};
