import{r as u,y as D,i as V,h as O,o as i,c as d,a as p,j as E,q as K,z as f,F as A,k as F,m as g,A as N,x as P,t as $,n as j,B as z,C as M}from"./index-76fa7c79.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";const q=r=>(z("data-v-24cc7a31"),r=r(),M(),r),H={class:"c-search"},T={class:"search__content"},G=["onKeydown"],J={key:0,class:"search__content--results"},Q=["onClick"],R={key:0},W=j('<div class="search--spinner" data-v-24cc7a31><div class="preloader-wrapper small active" data-v-24cc7a31><div class="spinner-layer spinner-green-only" data-v-24cc7a31><div class="circle-clipper left" data-v-24cc7a31><div class="circle" data-v-24cc7a31></div></div><div class="gap-patch" data-v-24cc7a31><div class="circle" data-v-24cc7a31></div></div><div class="circle-clipper right" data-v-24cc7a31><div class="circle" data-v-24cc7a31></div></div></div></div></div>',1),X=[W],Y={class:"search__cleaner"},Z=q(()=>p("i",{class:"Small material-icons"},"clear",-1)),ee=[Z],ae={__name:"CSearch",props:{options:{type:Array,default:null},asyncOptionsPromise:{type:Function,default:null},modelValue:{type:[String,Object],default:""}},emits:["update:modelValue"],setup(r,{emit:_}){const l=r,S=e=>{const a=c=>{const o=c.target;!o||o===document.documentElement||o===document.body||o.closest(".c-search")||e()};V(()=>{document.addEventListener("click",a)}),N(()=>{document.removeEventListener("click",a)})},t=u(""),s=u([]),n=u(-1),h=u(!1),m=u(!0),w=e=>{s.value=l.options.filter(a=>(a.description||a).toLowerCase().includes(e.toLowerCase())),k()},x=async e=>{h.value=!0;try{const a=await l.asyncOptionsPromise(e);s.value=a,k()}catch(a){console.error(a)}h.value=!1},I=e=>{t.value=e.description||e,s.value=[],_("update:modelValue",e),v()},y=()=>{t.value="",s.value=[],_("update:modelValue",""),v()},L=async()=>{n.value=-1,t.value?l.asyncOptionsPromise?await x(t.value):w(t.value):y()},b=()=>{if(n.value!==-1&&s.value.length>0){const e=s.value[n.value];t.value=e.description||e,s.value=[],_("update:modelValue",e),v()}},B=D(()=>t.value!==""),C=e=>{s.value.length!==0&&(e==="down"?n.value=(n.value+1)%s.value.length:e==="up"&&(n.value=(n.value-1+s.value.length)%s.value.length))},v=()=>{m.value=!0},k=()=>{m.value=!1};return V(()=>{var e;S(v),l.modelValue&&(t.value=((e=l.modelValue)==null?void 0:e.description)||l.modelValue)}),O(()=>l.options,()=>{t.value?w(t.value):(s.value=[],y())}),O(()=>l.modelValue,e=>{t.value=e?e.description||e:""}),(e,a)=>(i(),d("div",H,[p("div",T,[E(p("input",{class:"search__content--text","onUpdate:modelValue":a[0]||(a[0]=c=>t.value=c),placeholder:"buscar...",type:"text",onInput:L,onKeydown:[a[1]||(a[1]=f(c=>C("down"),["down"])),a[2]||(a[2]=f(c=>C("up"),["up"])),f(b,["enter"])]},null,40,G),[[K,t.value]]),m.value?g("",!0):(i(),d("ul",J,[(i(!0),d(A,null,F(s.value,(c,o)=>(i(),d("li",{key:o,class:P({active:o===n.value}),onClick:te=>I(c)},$(c.description||c),11,Q))),128))]))]),h.value?(i(),d("div",R,X)):g("",!0),p("div",Y,[B.value?(i(),d("button",{key:0,class:"search__cleaner--btn red teal lighten-5",onClick:y},ee)):g("",!0)])]))}},le=U(ae,[["__scopeId","data-v-24cc7a31"]]);export{le as C};
