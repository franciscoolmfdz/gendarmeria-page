import{y as S,g as o,h as T,o as y,f as A,j as I,_ as k,q as B,C as E,I as x,b as r,m as a,n as D,x as v,c as L,a as N,e as q}from"./index-f4124e79.js";import{_ as M}from"./CHeaderBar-e62534a5.js";import{_ as U}from"./subSideNav-ba5cbd5b.js";import{_ as w}from"./CButton-33aeb8f9.js";import{_ as P}from"./CTable-149f3711.js";import{s as j}from"./filterSituacion-7f8223e4.js";import"./CChartDonutSection-564b2824.js";const F="/dmm/aggression-types",G=async(R,i)=>S(F,"GET",null,i);const z={class:"content-header-eventos"},H={class:"selected-options"},J={key:0,class:"c-option-volver"},K={class:"table-section-principal"},O={class:"content__section"},C=3,se={__name:"registroViolencia",setup(R){const i=j(),n=o({id:15,description:"Región Metropolitana de Santiago"}),u=o([]),l=o({id:16,description:"CCP Colina 1"}),m=o([]),c=o({id:1,description:"N° de eventos de riñas en el período."}),g=o([]),_=o("Estado situación carcelaria / Registro de eventos"),b=o([{rowReference:"year",description:"Año"},{rowReference:"month",description:"Mes"},{rowReference:"gender",description:"Sexo"},{rowReference:"quantity",description:"Cantidad"}]),d=o([]),$=()=>{q.push("/situacionCarcelaria")},h=async t=>{if(!i.listadoRegiones.length>0){let e=await B();u.value=e,i.setRegionesList(e)}else u.value=i.listadoRegiones},f=async()=>{const t={regionId:n.value};m.value=await E(t)},V=async()=>{var t,e,s;try{if(n.value){const p={regionId:((t=n.value)==null?void 0:t.id)??n.value,carcelId:((e=l.value)==null?void 0:e.id)??l.value,aggresionTypeId:((s=c.value)==null?void 0:s.id)??c.value};d.value=await x(p)}else d.value=[]}catch(p){console.log(p)}};return T(async()=>{n.value=i.regionSelected.id,g.value=await G(),await h(),await f(),await V()}),(t,e)=>(y(),A(k,{class:"contenido-eventos"},{default:I(()=>[r("div",z,[a(M,{title:_.value,"section-value":C},null,8,["title"]),a(D,{"active-spin":t.activeSpin},null,8,["active-spin"]),r("div",H,[a(v,{class:"select-region",options:u.value,modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=s=>n.value=s),onChangeValue:e[1]||(e[1]=s=>f())},null,8,["options","modelValue"]),a(v,{class:"select-carcel",options:m.value,modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value=s)},null,8,["options","modelValue"]),a(v,{class:"select-question",options:g.value,modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=s=>c.value=s)},null,8,["options","modelValue"]),a(w,{class:"btn-search",title:"",onExecuteAction:V})]),!t.activeSpin&&t.topPosition!==0?(y(),L("div",J,[a(w,{class:"btn-volver",title:"Volver",onExecuteAction:$,disabled:t.blockButton},null,8,["disabled"])])):N("",!0)]),r("div",K,[a(U,{class:"subsection-eventos",title:_.value,"section-value":C,pointValue:t.pointCalculated,pointTitle:"Registro de eventos",pointSubtitle:""},null,8,["title","pointValue"]),r("div",O,[a(P,{columns:b.value,rows:d.value},null,8,["columns","rows"])])])]),_:1}))}};export{se as default};
