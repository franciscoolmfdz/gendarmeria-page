import{r as p,d as A,o as q,e as w,w as I,_ as D,b as t,a as N,s as V,i as F,l as x}from"./index-02a86afa.js";import{_ as H}from"./CHeaderBar-e7bf5f4e.js";import{_ as M}from"./ManagementXLS-fd34d444.js";import{_ as j,a as f,b as B}from"./CSection-3436286c.js";import{_ as R}from"./CTable-e283eeb3.js";import{s as $,f as _}from"./files-708724eb.js";import{d as k}from"./dimensionHistory-c3ecec4f.js";import"./api-7944baea.js";const h=[{id:1,dmNumber:1,dmCode:"p1",description:"Cuántos años tiene actualmente?",categoryId:1,subCategoryId:1,isEscalar:0},{id:2,dmNumber:2,dmCode:"p2",description:"Cuando niño, ¿estuvo en algún Hogar de menores o del Sename? (0-1)",categoryId:1,subCategoryId:1,isEscalar:0},{id:3,dmNumber:"2B",dmCode:"p3",description:"¿Recuerda el nombre de algún programa o centro donde estuvo?",categoryId:1,subCategoryId:1,isEscalar:0},{id:4,dmNumber:3,dmCode:"p4",description:"hasta qué curso llegó (en la calle)?",categoryId:1,subCategoryId:1,isEscalar:0},{id:5,dmNumber:4,dmCode:"p5",description:"¿es chileno?",categoryId:1,subCategoryId:1,isEscalar:0},{id:6,dmNumber:5,dmCode:"p6",description:"Antes de estar en esta cárcel, ¿había estado preso(a)? (como adulto)",categoryId:1,subCategoryId:1,isEscalar:0},{id:7,dmNumber:6,dmCode:"p7",description:"¿Cuánto tiempo lleva en esta cárcel?",categoryId:1,subCategoryId:1,isEscalar:0},{id:8,dmNumber:7,dmCode:"p8",description:"¿Qué año saldría en libertad (cumplido)?",categoryId:1,subCategoryId:1,isEscalar:0},{id:9,dmNumber:8,dmCode:"p9",description:"Aquí recibo una buena cantidad de comida",categoryId:1,subCategoryId:2,isEscalar:1},{id:10,dmNumber:9,dmCode:"p10",description:"Cuento con un baño (wáter) decente",categoryId:1,subCategoryId:2,isEscalar:1},{id:11,dmNumber:10,dmCode:"p11",description:"Duermo en un lugar limpio",categoryId:1,subCategoryId:2,isEscalar:1},{id:12,dmNumber:11,dmCode:"p12",description:"En mi módulo hay buena temperatura (ni mucho frío ni mucho calor)",categoryId:1,subCategoryId:2,isEscalar:1},{id:13,dmNumber:12,dmCode:"p13",description:"Recibo comida en buen estado",categoryId:1,subCategoryId:2,isEscalar:1},{id:14,dmNumber:13,dmCode:"p14",description:"Recibo luz natural en mi celda o módulo",categoryId:1,subCategoryId:2,isEscalar:1},{id:15,dmNumber:14,dmCode:"p15",description:"Mi celda tiene buena ventilación",categoryId:1,subCategoryId:2,isEscalar:1},{id:16,dmNumber:15,dmCode:"p16",description:"Aquí he podido trabajar y ganar algo de plata",categoryId:1,subCategoryId:3,isEscalar:1},{id:17,dmNumber:16,dmCode:"p17",description:"En esta cárcel he recibido capacitación laboral",categoryId:1,subCategoryId:3,isEscalar:1},{id:18,dmNumber:17,dmCode:"p18",description:"Aquí he podido hablar con la asistente social",categoryId:1,subCategoryId:3,isEscalar:1},{id:19,dmNumber:18,dmCode:"p19",description:"En esta cárcel he podido conversar con la psicóloga",categoryId:1,subCategoryId:3,isEscalar:1},{id:20,dmNumber:19,dmCode:"p20",description:"Aquí puedo ir donde el paramédico si lo necesito",categoryId:1,subCategoryId:3,isEscalar:1},{id:21,dmNumber:20,dmCode:"p21",description:"En esta cárcel he podido ir a la escuela o liceo penal",categoryId:1,subCategoryId:3,isEscalar:1},{id:22,dmNumber:21,dmCode:"p22",description:"Aquí se puede ir a talleres de alcohol o drogas si se necesita",categoryId:1,subCategoryId:3,isEscalar:1},{id:23,dmNumber:22,dmCode:"p23",description:"En esta cárcel me llevo bien con otros internos",categoryId:1,subCategoryId:4,isEscalar:1},{id:24,dmNumber:23,dmCode:"p24",description:"En esta cárcel me siento inseguro o amenazado",categoryId:1,subCategoryId:4,isEscalar:1},{id:25,dmNumber:24,dmCode:"p25",description:"Siento que soy tratado con respeto por otros internos",categoryId:1,subCategoryId:4,isEscalar:1},{id:26,dmNumber:25,dmCode:"p26",description:"En esta cárcel se abusa de los internos más débiles",categoryId:1,subCategoryId:4,isEscalar:1},{id:27,dmNumber:26,dmCode:"p27",description:"En esta cárcel me siento seguro de agresiones de otros internos",categoryId:1,subCategoryId:4,isEscalar:1},{id:28,dmNumber:27,dmCode:"p28",description:"En esta cárcel tengo amigos que me ayudan",categoryId:1,subCategoryId:4,isEscalar:1},{id:29,dmNumber:28,dmCode:"p29",description:"En esta cárcel temo por mi integridad física",categoryId:1,subCategoryId:4,isEscalar:1},{id:30,dmNumber:29,dmCode:"p30",description:"Soy tratado con respeto por los funcionarios",categoryId:1,subCategoryId:5,isEscalar:1},{id:31,dmNumber:30,dmCode:"p31",description:"He recibido tratos humillantes en esta cárcel",categoryId:1,subCategoryId:5,isEscalar:1},{id:32,dmNumber:31,dmCode:"p32",description:"Soy tratado como un ser humano en esta cárcel",categoryId:1,subCategoryId:5,isEscalar:1},{id:33,dmNumber:32,dmCode:"p33",description:"Me llevo bien con los gendarmes de mi módulo",categoryId:1,subCategoryId:5,isEscalar:1},{id:34,dmNumber:33,dmCode:"p34",description:"Siento que los funcionarios confían en mí",categoryId:1,subCategoryId:5,isEscalar:1},{id:35,dmNumber:34,dmCode:"p35",description:"En esta cárcel los funcionarios son honestos",categoryId:1,subCategoryId:5,isEscalar:1},{id:36,dmNumber:35,dmCode:"p36",description:"En esta cárcel recibo apoyo del personal cuando lo necesito",categoryId:1,subCategoryId:5,isEscalar:1},{id:37,dmNumber:36,dmCode:"p37",description:"En esta cárcel los gendarmes se preocupan por mí",categoryId:1,subCategoryId:6,isEscalar:1},{id:38,dmNumber:37,dmCode:"p38",description:"Conozco los pasos a seguir para hacer un reclamo",categoryId:1,subCategoryId:6,isEscalar:1},{id:39,dmNumber:38,dmCode:"p39",description:"Siento que las reglas de esta cárcel son claras",categoryId:1,subCategoryId:6,isEscalar:1},{id:40,dmNumber:39,dmCode:"p40",description:"En esta cárcel me siento discriminado (por mi orientación sexual, país de origen, delito u otra)",categoryId:1,subCategoryId:6,isEscalar:1},{id:41,dmNumber:40,dmCode:"p41",description:"Acá responden rápido a los escritos de los internos",categoryId:1,subCategoryId:6,isEscalar:1},{id:42,dmNumber:41,dmCode:"p42",description:"Los gendarmes responden rápido cuando hay una emergencia",categoryId:1,subCategoryId:6,isEscalar:1},{id:43,dmNumber:42,dmCode:"p43",description:"Aquí cada gendarme pone sus propias reglas",categoryId:1,subCategoryId:6,isEscalar:1},{id:44,dmNumber:43,dmCode:"p44",description:"En esta cárcel recibo un trato justo y se respetan mis derechos",categoryId:1,subCategoryId:7,isEscalar:1},{id:45,dmNumber:44,dmCode:"p45",description:"Mi vida en esta cárcel es aburrida",categoryId:1,subCategoryId:7,isEscalar:1},{id:46,dmNumber:45,dmCode:"p46",description:"En esta cárcel he sufrido mucho",categoryId:1,subCategoryId:7,isEscalar:1},{id:47,dmNumber:46,dmCode:"p47",description:"En este lugar he pensado en el suicidio",categoryId:1,subCategoryId:7,isEscalar:1},{id:48,dmNumber:47,dmCode:"p48",description:"Hay mucho consumo de drogas en esta cárcel",categoryId:1,subCategoryId:7,isEscalar:1},{id:49,dmNumber:48,dmCode:"p49",description:"Acá te mandan al castigo por cualquier cosa",categoryId:1,subCategoryId:7,isEscalar:1},{id:50,dmNumber:49,dmCode:"p50",description:"Siento que esta cárcel funciona bien",categoryId:1,subCategoryId:7,isEscalar:1},{id:51,dmNumber:50,dmCode:"p51",description:"El ambiente de esta cárcel es tenso",categoryId:1,subCategoryId:7,isEscalar:1},{id:52,dmNumber:51,dmCode:"p52",description:"En esta cárcel las cosas se mueven con plata",categoryId:1,subCategoryId:7,isEscalar:1},{id:53,dmNumber:52,dmCode:"p52b",description:"Los gendarmes son justos en su trato con nosotros aqui",categoryId:1,subCategoryId:7,isEscalar:1},{id:54,dmNumber:"52B",dmCode:"p53",description:"Aquí tratan bien a las visitas",categoryId:1,subCategoryId:8,isEscalar:1},{id:55,dmNumber:53,dmCode:"p54",description:"A pesar de todo, le he podido dar un sentido a mi vida en esta cárcel",categoryId:1,subCategoryId:8,isEscalar:1},{id:56,dmNumber:"sexo",dmCode:"hombre",description:"¿hopmbre o mujer?",categoryId:1,subCategoryId:1,isEscalar:0}],T=[{id:1,code:1,description:"CP Alto Hospicio",regionId:2},{id:2,code:2,description:"CP Antofagasta",regionId:3},{id:3,code:3,description:"CCP Copiapó",regionId:4},{id:4,code:4,description:"CP La Serena",regionId:5},{id:5,code:5,description:"CP Valparaíso",regionId:6},{id:6,code:6,description:"CP Rancagua",regionId:7},{id:7,code:7,description:"CCP Talca",regionId:8},{id:8,code:8,description:"CP Biobío",regionId:9},{id:9,code:9,description:"CCP Temuco",regionId:10},{id:10,code:10,description:"CP Alto Bonito – Puerto Montt",regionId:12},{id:11,code:11,description:"CCP Coyhaique",regionId:13},{id:12,code:12,description:"CP Punta Arenas",regionId:14},{id:13,code:1301,description:"CDP Santiago Sur (Ex Penitenciaría)",regionId:15},{id:14,code:1302,description:"CPF Santiago (Centro penitenciario Femenino - Cárcel de mujeres)",regionId:15},{id:15,code:1303,description:"CDP Puente Alto",regionId:15},{id:16,code:1304,description:"CCP Colina 1",regionId:15},{id:17,code:1305,description:"CCP Colina 2",regionId:15},{id:18,code:14,description:"CP Valdivia",regionId:11},{id:19,code:15,description:"CP Arica",regionId:1},{id:20,code:16,description:"CCP Chillán",regionId:16}],J=(e,o)=>{if(!o)return null;switch(e){case 5:return 4;case 4:return 3;case 3:return 2;case 2:return 1;case 1:return 0}},L=e=>T.find(a=>a.code===e),v=(e,o,a)=>{const c=L(a);return{value:o,pound:J(o,e==null?void 0:e.isEscalar),dimensionId:e.id,isScalar:e.isEscalar,subCategoryId:e.subCategoryId,categoryId:e.categoryId,regionId:c.regionId,carcelId:c.id}},O=(e,o,a,c=1)=>{const y=a.split("-");let n={period:a,hYear:y[0],hMonth:y[1],userId:c,categoryId:o,fileId:null,items:[]};for(let r=0;r<e.length;r++){const i=e[r].carcel;let g=Object.keys(e[r]);for(let C=0;C<h.length;C++){const m=h[C];if(g.some(l=>l===m.dmCode)){const l=e[r][m.dmCode],b=v(m,l,i);n.items.push(b)}else{const b=v(m,-1,i);n.items.push(b)}}}return console.log(JSON.stringify(n.items)),n};const z=N("i",{class:"large material-icons"},"arrow_upward",-1),Q={class:"content-document__section"},P=1,oe={__name:"VidaInternos",setup(e){const o=$(),a=p("Calidad de vida de los internos"),c=p(o.documentData),y=p([{rowReference:"name",description:"Nombre archivo"},{rowReference:"periodo",description:"Periodo"}]),n=()=>[{name:"descargar",iconName:"pageview"}],r=p(),i=p(null),g=p(null),C=()=>{},m=async()=>{const u=JSON.parse(JSON.stringify(i.value.dataFileJson)),d=O(u,P,g.value),s=new FormData;s.append("archivo",i.value.fileElement),s.append("categoryId",P),s.append("usrId",1);const S={ignoreHeader:!0},E=await _.postFiles(s,S);E!=null&&E.id&&(d.fileId=E.id,await k.postDimensionHistory(d))},l=()=>{r.value.open()},b=async()=>{let u=await _.getFiles();u=u.map(d=>(d.actions=n(),d)),o.addDocument(u)};return A(async()=>{await b()}),(u,d)=>(q(),w(D,null,{default:I(()=>[t(H,{title:a.value},null,8,["title"]),N("button",{onClick:l,class:"btn agregar__archivo"},[V("Agregar registro "),z]),t(B,{ref_key:"modalForm",ref:r,title:"Subir documento",onClose:C,onSubmit:m},{default:I(()=>[t(j,{title:""},{default:I(()=>[t(f,{title:""},{default:I(()=>[t(M,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=s=>i.value=s)},null,8,["modelValue"])]),_:1}),t(f,{title:"Periodo",class:"c-periodo"},{default:I(()=>[F(N("input",{class:"periodo-item",type:"month","onUpdate:modelValue":d[1]||(d[1]=s=>g.value=s)},null,512),[[x,g.value]])]),_:1})]),_:1})]),_:1},512),N("div",Q,[t(R,{columns:y.value,rows:c.value},null,8,["columns","rows"])])]),_:1}))}};export{oe as default};
