import{u as E,g as a,h as P,o as y,f as k,j as _,_ as H,q as M,l as b,m as o,b as l,x as j,c as A,a as F,e as L,C as N}from"./index-22e32733.js";import{_ as q}from"./subSideNav-03d27cc9.js";import{_ as U}from"./CHeaderBar-286bf8ed.js";import{a as C}from"./CChartDonutSection-695f227e.js";import{_ as I}from"./CButton-1b43ba3e.js";import{_ as R}from"./CTable-0fa27f9b.js";import{s as z}from"./filterSituacion-d5979899.js";const G={class:"selected-options"},J={key:0,class:"c-option-volver"},K={class:"table-section-principal"},O={class:"table-section"},Q={class:"content__section"},W=l("span",{class:"card-title"},"Dotación efectiva del personal psicología",-1),X={class:"content__section"},Y=l("span",{class:"card-title"},"Dotación efectiva del personal asistente social",-1),r=3,D=28,ne={__name:"profesionales",setup(Z){E();const t=z(),n=a({id:15,description:"Región Metropolitana de Santiago"}),v=a(null),m=a(null),d=a(0),u=a([]),g=a("Estado situación carcelaria / Personal areas de intervención"),w=a([{rowReference:"carcel",description:"Establecimiento penal"},{rowReference:"profesionalHombre",description:"Hombre"},{rowReference:"profesionalMujer",description:"Mujer"},{rowReference:"profesionalTotal",description:"Total"}]),p=a([]),f=a([]),V=()=>{L.push("/situacionCarcelaria")},S=async e=>{if(!t.listadoRegiones.length>0){let s=await M();u.value=s,t.setRegionesList(s)}else u.value=t.listadoRegiones},$=async()=>{var s;let e={categoryId:r,subCategoryId:D,lastPeriod:!0};return d.value||(d.value=await b(e)),e={categoryId:r,subCategoryId:D,historyId:d.value.id,embedProfesionals:!0},v.value?e.regionId=v.value:(s=t==null?void 0:t.regionSelected)!=null&&s.id&&(e.regionId=t.regionSelected.id),m.value&&(e.carcelId=m.value),await T(),e},h=async()=>{try{if(n.value){const e=await $();let c=(await b(e)).items.map(i=>{const x=t.listadoCarceles.find(B=>B.id==i.carcelId);return i.carcel=x.description,i});p.value=c.filter(i=>i.profesionalTypeId===1),f.value=c.filter(i=>i.profesionalTypeId===2)}else p.value=[],f.value=[]}catch(e){console.log(e)}},T=async()=>{if(!t.listadoCarceles.length){const e={regionId:t.regionSelected.id};let s=await N(e);t.setCarcelesList(s)}};return P(async()=>{n.value=t.regionSelected,await S(),await h()}),(e,s)=>(y(),k(H,{class:"contenido-profesionales"},{default:_(()=>[o(U,{title:g.value,"section-value":r},null,8,["title"]),l("div",G,[o(j,{class:"select-region",options:u.value,modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=c=>n.value=c)},null,8,["options","modelValue"]),o(I,{class:"btn-search",title:"",onExecuteAction:h})]),!e.activeSpin&&e.topPosition!==0?(y(),A("div",J,[o(I,{class:"btn-volver",title:"Volver",onExecuteAction:V})])):F("",!0),l("div",K,[o(q,{class:"subsection-profesional",title:g.value,"section-value":r,pointValue:e.pointCalculated,pointTitle:"Dotación efectiva del personal areas de intervención",pointSubtitle:""},null,8,["title","pointValue"]),l("div",O,[l("div",Q,[o(C,{class:"card-information"},{default:_(()=>[W]),_:1}),o(R,{columns:w.value,rows:p.value},null,8,["columns","rows"])]),l("div",X,[o(C,{class:"card-information"},{default:_(()=>[Y]),_:1}),o(R,{columns:w.value,rows:f.value},null,8,["columns","rows"])])])])]),_:1}))}};export{ne as default};
