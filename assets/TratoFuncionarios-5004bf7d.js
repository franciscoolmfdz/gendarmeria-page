import{u as O,g as i,r as C,o as T,f as w,j as F,_ as B,m as u,n as H,b as e,a as L,k as X}from"./index-16ad8c53.js";import{_ as Y}from"./subSideNav-309f19b3.js";import{_ as z}from"./CHeaderBar-3cb4d6a0.js";import{_ as R}from"./CFilterbar-052402ab.js";import{_ as W}from"./CCard-4b439096.js";import{_ as j}from"./CColunmChart-72699445.js";import"./CChartDonutSection-fb456158.js";import"./CButton-2c0f70bc.js";const U={class:"chart-section-principal"},G={class:"trato-funcionarios"},J={class:"chart-section"},K=e("span",{class:"card-title"},"Preguntas",-1),Q=e("span",{class:"question--value"},"5.1 Soy tratado con respeto por los funcionarios",-1),Z=e("span",{class:"question--value"},"5.2 He recibido tratos humillantes en esta cárcel",-1),ee=e("span",{class:"question--value"},"5.3 Soy tratado como un ser humano en esta cárcel",-1),te=e("span",{class:"question--value"},"5.4 En esta cárcel se abusa de los internos más débiles",-1),se=e("span",{class:"question--value"},"5.5 Me llevo bien con los gendarmes de mi módulo",-1),oe=e("span",{class:"question--value"},"5.6 Siento que los funcionarios confían en mí",-1),ae=e("span",{class:"question--value"},"5.7 En esta cárcel los funcionarios son honestos",-1),ne=e("span",{class:"question--value"},"5.8 En esta cárcel recibo apoyo del personal cuando lo necesito",-1),ie=e("span",{class:"question--value"},"5.9 En esta cárcel los gendarmes se preocupan por mí",-1),p=1,he={__name:"TratoFuncionarios",setup(le){const t=O(),o=i(!1),d=i("Calidad de vida de los internos / Trato con funcionario interno"),_=i(""),f=i(0),P=i({categories:["5.1","5.2","5.3","5.4","5.5","5.6","5.7"],crosshair:!1}),A=i({min:0,allowDecimals:!1,title:{text:""},categories:["Nunca","Casi nunca","A veces","Casi siempre","Siempre"]}),D=i({column:{pointPadding:.2,borderWidth:3}}),E=i({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),l=C([]),I=(s,c,a)=>C({id:s,name:c,data:a,dataLabels:{enabled:!0,color:"#fff",align:"center",x:-15,style:{inside:!0,fontSize:"10px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),V=async s=>{o.value=!0;const c=l.filter(a=>a.id!==s);l.splice(0,l.length),c.map(a=>l.push(a)),await t.sleep(50),o.value=!1},$=s=>s?Math.round(s*100)/100:0,m=async(s,c,a)=>{var v,h;try{let r=((v=t==null?void 0:t.penitenciaria)==null?void 0:v.id)??null,y=((h=t==null?void 0:t.penitenciaria)==null?void 0:h.description)??null,g=t.historyId;if(a&&(r=s,y=c),g&&r){o.value=!0;let M=await X({historyId:g,carcelId:r,categoryId:1,subCategoryId:5});const b=[];let x=0,S=M.filter(n=>n.poundUsed===1);S.map(n=>{const q=n!=null&&n.promPound?Math.round((n==null?void 0:n.promPound)*100)/100:0;x+=q,b.push(q)}),f.value+=x/S.length;let N=$(f.value/t.carcelesSelected.length);_.value=N.toString(),l.push(I(r,y,b))}}catch(r){console.log(r)}finally{a||(o.value=!1)}},k=async()=>{o.value=!0,t.carcelesSelected&&t.carcelesSelected.length>0&&await Promise.all(t.carcelesSelected.map(async s=>await m(s.id,s.description,!0))),o.value=!1};return(s,c)=>(T(),w(B,null,{default:F(()=>[u(z,{title:d.value,"section-value":p},null,8,["title"]),u(H,{"active-spin":o.value},null,8,["active-spin"]),u(R,{baseFilter:p,multipleDisabled:!1,onExecuteMount:k,onExecuteAction:m,onExecuteRemove:V}),e("div",U,[u(Y,{title:d.value,"section-value":p,pointValue:_.value,pointTitle:"Trato con funcionarios",pointSubtitle:"Promedio respuestas de trato con funcionarios"},null,8,["title","pointValue"]),e("div",G,[e("div",J,[o.value?L("",!0):(T(),w(j,{key:0,chartType:"bar",optionsAxisX:P.value,optionsAxisY:A.value,plotOptions:D.value,tooltip:E.value,series:l},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))]),u(W,{class:"card-preguntas"},{default:F(()=>[K,Q,Z,ee,te,se,oe,ae,ne,ie]),_:1})])])]),_:1}))}};export{he as default};
