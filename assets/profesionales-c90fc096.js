import{u as q,g as s,h as z,o as m,f as S,j as g,_ as G,x as J,l as V,b as c,m as i,n as K,c as $,C as O,a as I,e as Q,y as W}from"./index-c5d31a8d.js";import{_ as X}from"./subSideNav-70a9c1a2.js";import{_ as Y}from"./CHeaderBar-cec87e9b.js";import{a as R}from"./CChartDonutSection-16a850f5.js";import{_ as x}from"./CButton-a8f847be.js";import{_ as C}from"./CTable-695503ac.js";import{s as Z}from"./filterSituacion-3453f87a.js";const ee={class:"content-header-profesionales"},ae={key:0,class:"selected-options"},te={key:1,class:"c-option-volver"},oe={class:"table-section-principal"},se={class:"table-section"},le={class:"content__section"},ie=c("span",{class:"card-title"},"Dotación efectiva del personal psicología",-1),ne={class:"content__section"},re=c("span",{class:"card-title"},"Dotación efectiva del personal asistente social",-1),ce={class:"content__section"},ue=c("span",{class:"card-title"},"Dotación efectiva Total",-1),b=3,k=28,he={__name:"profesionales",setup(de){q();const d=s(null),l=Z(),n=s({id:15,description:"Región Metropolitana de Santiago"});s(null);const H=s(null),p=s([]),B=s([{rowReference:"title",description:"Totales"},{rowReference:"totalProfesionalHombre",description:"Hombre"},{rowReference:"totalProfesionalMujer",description:"Mujer"},{rowReference:"total",description:"Total"}]),M=s(null),h=s(0),y=s([]),P=s("Estado situación carcelaria / Personal de reinserción"),j=s([{rowReference:"carcel",description:"Establecimiento penal"},{rowReference:"profesionalHombre",description:"Hombre"},{rowReference:"profesionalMujer",description:"Mujer"}]),f=s([]),v=s([]),E=()=>{Q.push("/situacionCarcelaria")},F=async e=>{if(!l.listadoRegiones.length>0){let r=await J();y.value=r,l.setRegionesList(r)}else y.value=l.listadoRegiones},A=async()=>{var r,u;let e={categoryId:b,historySubCategoryId:k,lastPeriod:!0};return h.value||(h.value=await V(e)),e={categoryId:b,historySubCategoryId:k,historyId:h.value.id,embedProfesionals:!0},n.value?e.regionId=(r=n.value)!=null&&r.id?n.value.id:n.value:(u=l==null?void 0:l.regionSelected)!=null&&u.id&&(e.regionId=l.regionSelected.id,n.value=l.regionSelected),M.value&&(e.carcelId=M.value),await L(),e},D=async()=>{try{if(n.value){const e=await A();let u=(await V(e)).items.map(a=>{const N=l.listadoCarceles.find(U=>U.id==a.carcelId);return a.carcel=N.description,a}),t=0,o=0,w=0,T=0,_=0;f.value=u.filter(a=>a.profesionalTypeId===1).map(a=>(t+=a.profesionalHombre,o+=a.profesionalMujer,a)),p.value.push({title:"Total personal psicología",totalProfesionalHombre:t,totalProfesionalMujer:o,total:t+o}),f.value.push({id:999,carcel:{data:"Total",class:"total"},profesionalHombre:{data:t,class:"total"},profesionalMujer:{data:o,class:"total"},profesionalTypeId:1}),w+=t,T+=o,_+=t+o,t=0,o=0,v.value=u.filter(a=>a.profesionalTypeId===2).map(a=>(t+=a.profesionalHombre,o+=a.profesionalMujer,a)),w+=t,T+=o,_+=t+o,H.value=_+" profesionales",p.value.push({title:"Total personal asistente social",totalProfesionalHombre:t,totalProfesionalMujer:o,total:t+o}),p.value.push({title:"Total dotación personal",totalProfesionalHombre:w,totalProfesionalMujer:T,total:_}),v.value.push({id:999,carcel:{data:"Total",class:"total"},profesionalHombre:{data:t,class:"total"},profesionalMujer:{data:o,class:"total"},profesionalTypeId:2})}else f.value=[],v.value=[]}catch(e){console.log(e)}},L=async()=>{if(!l.listadoCarceles.length){let e=await W();l.setCarcelesList(e)}};return z(async()=>{d.value=!0,n.value=l.regionSelected,await F(),await D(),d.value=!1}),(e,r)=>(m(),S(G,{class:"contenido-profesionales"},{default:g(()=>[c("div",ee,[i(Y,{title:P.value,"section-value":b},null,8,["title"]),i(K,{"active-spin":d.value},null,8,["active-spin"]),d.value?I("",!0):(m(),$("div",ae,[d.value?I("",!0):(m(),S(O,{key:0,ref:"region",class:"select-region",options:y.value,modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=u=>n.value=u)},null,8,["options","modelValue"])),i(x,{class:"btn-search",title:"",onExecuteAction:D})])),!d.value&&e.topPosition!==0?(m(),$("div",te,[i(x,{class:"btn-volver",title:"Volver",onExecuteAction:E})])):I("",!0)]),c("div",oe,[i(X,{class:"subsection-profesional",title:P.value,"point-type":3,"section-value":b,"point-label":H.value,pointTitle:"Personal de reinserción",pointSubtitle:"","point-disabled":!0},null,8,["title","point-label"]),c("div",se,[c("div",le,[i(R,{class:"card-information"},{default:g(()=>[ie]),_:1}),i(C,{class:"table-psicologia",columns:j.value,rows:f.value},null,8,["columns","rows"])]),c("div",ne,[i(R,{class:"card-information"},{default:g(()=>[re]),_:1}),i(C,{class:"table-asistente",columns:j.value,rows:v.value},null,8,["columns","rows"])]),c("div",ce,[i(R,{class:"card-information"},{default:g(()=>[ue]),_:1}),i(C,{class:"table-asistente",columns:B.value,rows:p.value},null,8,["columns","rows"])])])])]),_:1}))}};export{he as default};
