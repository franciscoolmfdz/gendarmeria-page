import{g as i,h as w,o as L,f as R,j as u,_ as h,J as T,q as V,m as s,b as o,x as y}from"./index-21f23004.js";import{_ as D}from"./CHeaderBar-cbc33fae.js";import{_ as $}from"./CCard-83fab194.js";import{_ as b}from"./CButton-107a322a.js";import{_ as x}from"./CTable-dbea869c.js";import{s as S}from"./filterSituacion-6730afca.js";const j={class:"selected-options"},A={class:"information__section"},B=o("span",{class:"card-title"},"Dotación efectiva del personal",-1),E=o("span",null," Dotación de licencias efectiva del personal, en base a la ubicación física y desempeño ",-1),M={class:"content__section"},k=3,U={__name:"licencias",setup(I){const c=S(),t=i({id:15,description:"Región Metropolitana de Santiago"}),d=i(),p=i("Estado situación carcelaria / Licencias del personal"),f=i([{rowReference:"centro",description:"Establecimiento penal"},{rowReference:"tieneLicencia",description:"Licencia vigente"},{rowReference:"noLicenciaVigente",description:"Sin licencia vigente"},{rowReference:"licenciaTotal",description:"Totales"},{rowReference:"porcentajeLicencia",description:"% Licencias"}]),l=i([]),m=n=>n?`${Math.round(n*100)/100} %`:"0 %",_=async()=>{var n;try{if(t.value){const e={regionId:((n=t.value)==null?void 0:n.id)??t.value},r=await T(e);l.value=r.map(a=>{a.tieneLicencia=a.licenseActiveTotal,a.noLicenciaVigente=a.licenseDisabledTotal,a.licenciaTotal=a.licenseTotal;const g=a.licenseActiveTotal/a.licenseTotal*100;return a.porcentajeLicencia=m(g),a})}else l.value=[]}catch(e){console.log(e)}},v=async n=>{if(!c.listadoRegiones.length>0){let e=await V();d.value=e,c.setRegionesList(e)}};return w(async()=>{t.value=c.regionSelected,await v(),await _()}),(n,e)=>(L(),R(h,{class:"contenido-licencia"},{default:u(()=>[s(D,{title:p.value,"section-value":k},null,8,["title"]),o("div",j,[s(y,{class:"select-region",options:d.value,modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r)},null,8,["options","modelValue"]),s(b,{class:"btn-search",title:"",onExecuteAction:_})]),o("div",A,[s($,{class:"card-information"},{default:u(()=>[B,E]),_:1})]),o("div",M,[s(x,{columns:f.value,rows:l.value},null,8,["columns","rows"])])]),_:1}))}};export{U as default};
