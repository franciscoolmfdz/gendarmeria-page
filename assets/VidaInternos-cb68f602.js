import{o as v,c as j,a as _,b as m,u as X,V as Y,r as c,d as O,w as A,_ as B,e as E}from"./index-c1545639.js";import{_ as M}from"./CSpinner-7aac9a0a.js";import{_ as T}from"./CHeaderBar-2b09166b.js";import{u as L,_ as N,a as z}from"./CCard-1ac39f99.js";import{e as R,H as S,a as G}from"./exporting-f72a385a.js";import{g as W}from"./dimensionHistory-a722060f.js";import"./api-7944baea.js";const J={class:"chart-polar"},K={class:"chart-polar__content"},Q={__name:"CPolarChart",props:{title:{type:String,default:""},subtitle:{type:String,default:""},optionsAxisX:{type:Object,required:!0},optionsAxisY:{type:Object,required:!0},plotOptions:{type:Object,required:!0},tooltip:{type:Object,required:!0},series:{type:Array,required:!0},pane:{type:Object,default:null}},setup(y){const o=y;R(S),G(S);const i={chart:{polar:!0},title:{text:o.title},subtitle:{text:o.subtitle},pane:{startAngle:0,endAngle:360},xAxis:o.optionsAxisX,yAxis:o.optionsAxisY,plotOptions:o.plotOptions,tooltip:o.tooltip,series:o.series};return(h,g)=>(v(),j("div",J,[_("div",K,[m(X(Y),{type:"chart",options:i,redrawOnUpdate:!0,oneToOneUpdate:!1,animateOnUpdate:!0})])]))}};const Z={class:"chart-section"},ee=_("span",{class:"card-title"},"Grafico calidad de vida de los internos",-1),te=_("span",{class:"question--value"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur ",-1),U=1,ue={__name:"VidaInternos",setup(y){const o=c(!1),i=L(),h=c("Calidad de vida de los internos"),g=c({tickInterval:1,min:2,max:9,labels:{format:"{value}"}}),w=c({min:0}),q=c({series:{pointStart:0,pointInterval:1},column:{pointPadding:0,groupPadding:0}}),D=c({headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0}),d=c([]),a=r=>r>0?Math.round(r*100)/100:0,V=r=>new Promise(l=>setTimeout(l,r)),$=async r=>{o.value=!0,d.value=d.value.filter(l=>l.id!==r),await V(500),o.value=!1},k=(r,l,f)=>({id:r,type:"line",name:l,data:f,pointPlacement:"between",dataLabels:{enabled:!0,color:"black",align:"center",y:0,style:{inside:!0,fontSize:"15px",fontFamily:"helvetica, arial, sans-serif",textShadow:!1,fontWeight:"normal"}}}),b=async(r,l,f)=>{var x,I;try{o.value=!0;let p=((x=i==null?void 0:i.penitenciaria)==null?void 0:x.id)??null,C=((I=i==null?void 0:i.penitenciaria)==null?void 0:I.description)??null;f&&(p=r,C=l);const P=i.historyId;if(P&&p){const H={historyId:P.value,carcelId:p,categoryId:1};let n=[],u=await W(H),e=u.filter(t=>t.subCategoryId===2&&t.valueUsed===1).reduce((t,s)=>t+s.promPound,0);e=e/7,e=a(e),n.push(a(e)),e=u.filter(t=>t.subCategoryId===3&&t.valueUsed===1).reduce((t,s)=>t+s.promPound,0),e=e/7,e=a(e),n.push(a(e)),e=u.filter(t=>t.subCategoryId===3&&t.valueUsed===1).reduce((t,s)=>t+s.promPound,0),e=e/7,e=a(e),n.push(a(e)),e=u.filter(t=>t.subCategoryId===4&&t.valueUsed===1).reduce((t,s)=>t+s.promPound,0),e=e/7,e=a(e),n.push(a(e)),e=u.filter(t=>t.subCategoryId===5&&t.valueUsed===1).reduce((t,s)=>t+s.promPound,0),e=e/7,e=a(e),n.push(a(e)),e=u.filter(t=>t.subCategoryId===6&&t.valueUsed===1).reduce((t,s)=>t+s.promPound,0),e=e/7,e=a(e),n.push(a(e)),e=u.filter(t=>t.subCategoryId===7&&t.valueUsed===1).reduce((t,s)=>t+s.promPound,0),e=e/10,e=a(e),n.push(a(e)),e=u.filter(t=>t.subCategoryId===8&&t.valueUsed===1).reduce((t,s)=>t+s.promPound,0),e=e/2,e=a(e),n.push(a(e)),d.value.push(k(p,C,n))}}catch(p){console.log(p)}finally{o.value=!1}},F=async()=>{o.value=!0,d.value=null,i.carcelesSelected&&i.carcelesSelected.length>0&&(d.value=[],await i.carcelesSelected.map(async r=>await b(r.id,r.description,!0)))};return(r,l)=>(v(),O(B,null,{default:A(()=>[m(T,{title:h.value,"section-value":U},null,8,["title"]),m(M,{"active-spin":o.value},null,8,["active-spin"]),m(N,{baseFilter:U,multipleDisabled:!0,onExecuteMount:F,onExecuteAction:b,onExecuteRemove:$}),_("div",Z,[m(z,{class:"card-information"},{default:A(()=>[ee,te]),_:1}),o.value?E("",!0):(v(),O(Q,{key:0,optionsAxisX:g.value,optionsAxisY:w.value,plotOptions:q.value,tooltip:D.value,series:d.value},null,8,["optionsAxisX","optionsAxisY","plotOptions","tooltip","series"]))])]),_:1}))}};export{ue as default};
