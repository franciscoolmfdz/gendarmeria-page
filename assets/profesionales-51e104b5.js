import{y as w,g as c,h as E,o as h,f as I,j as f,_ as x,q as C,m as n,b as l,x as M,c as S,a as j,e as k}from"./index-8d4f2d0d.js";import{_ as B}from"./subSideNav-6a4a3c87.js";import{_ as P}from"./CHeaderBar-7efe5fed.js";import{a as $}from"./CChartDonutSection-15b10d00.js";import{_ as y}from"./CButton-8c26c48a.js";import{_ as b}from"./CTable-18a4dd69.js";import{s as A}from"./filterSituacion-3793df01.js";const R="/dmm/dimension-history-profesional",H=async(e,r)=>{if(e!=null&&e.id){let u=`${R}/${e.id}`;return w(u,"GET",null,r)}let o=R,s=null;return e!=null&&e.regionId&&(s?s=`${s}&regionId=${e.regionId}`:s=`regionId=${e.regionId}`),s&&(o=`${o}?${s}`),w(o,"GET",null,r)};const L={class:"selected-options"},N={key:0,class:"c-option-volver"},U={class:"table-section-principal"},G={class:"table-section"},q={class:"content__section"},F=l("span",{class:"card-title"},"Dotación efectiva del personal psicología",-1),z={class:"content__section"},J=l("span",{class:"card-title"},"Dotación efectiva del personal asistente social",-1),V=3,ee={__name:"profesionales",setup(e){const r=A(),o=c({id:15,description:"Región Metropolitana de Santiago"}),s=c([]),u=c("Estado situación carcelaria / Personal areas de intervención"),_=c([{rowReference:"centro",description:"Establecimiento penal"},{rowReference:"profesionalHombre",description:"Hombre"},{rowReference:"profesionalMujer",description:"Mujer"},{rowReference:"profesionalTotal",description:"Total"}]),p=c([]),d=c([]),D=()=>{k.push("/situacionCarcelaria")},T=async a=>{if(!r.listadoRegiones.length>0){let t=await C();s.value=t,r.setRegionesList(t)}},m=async()=>{var a;try{if(o.value){const t={regionId:((a=o.value)==null?void 0:a.id)??o.value};let g=(await H(t)).map(i=>(i.profesionalTotal=i.profesionalHombre+i.profesionalMujer,i));p.value=g.filter(i=>i.profesionalType===1),d.value=g.filter(i=>i.profesionalType===2)}else p.value=[],d.value=[]}catch(t){console.log(t)}};return E(async()=>{o.value=r.regionSelected,await T(),await m()}),(a,t)=>(h(),I(x,{class:"contenido-profesionales"},{default:f(()=>[n(P,{title:u.value,"section-value":V},null,8,["title"]),l("div",L,[n(M,{class:"select-region",options:s.value,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=v=>o.value=v)},null,8,["options","modelValue"]),n(y,{class:"btn-search",title:"",onExecuteAction:m})]),!a.activeSpin&&a.topPosition!==0?(h(),S("div",N,[n(y,{class:"btn-volver",title:"Volver",onExecuteAction:D})])):j("",!0),l("div",U,[n(B,{class:"subsection-profesional",title:u.value,"section-value":V,pointValue:a.pointCalculated,pointTitle:"Dotación efectiva del personal areas de intervención",pointSubtitle:""},null,8,["title","pointValue"]),l("div",G,[l("div",q,[n($,{class:"card-information"},{default:f(()=>[F]),_:1}),n(b,{columns:_.value,rows:p.value},null,8,["columns","rows"])]),l("div",z,[n($,{class:"card-information"},{default:f(()=>[J]),_:1}),n(b,{columns:_.value,rows:d.value},null,8,["columns","rows"])])])])]),_:1}))}};export{ee as default};
