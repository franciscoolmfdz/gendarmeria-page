import{i as s,j as B,o as x,f as C,g as I,_ as L,H as k,q as N,m as u,b as d,z as U,a as A,y as E}from"./index-70926910.js";import{_ as F}from"./CHeaderBar-a99216df.js";import{_ as q}from"./CCard-3d6808c8.js";import{_ as z}from"./CButton-3d32abb2.js";import{_ as G}from"./CTable-85037865.js";import{s as J}from"./filterSituacion-39c53be9.js";const K={class:"selected-options"},O={class:"information__section"},Q=d("span",{class:"card-title"},"Tasa de ocupación",-1),W=d("span",null," Tasa de ocupación total de penitenciarías en contraste con población imputada. ",-1),X={class:"content__section"},Y=3,ce={__name:"poblacionImputados",setup(Z){const a=J(),y=s("Estado situación carcelaria / Tasa de ocupación imputados Vs Total"),l=s(!1),p=s(),m=s(),P=s([{description:"Centro penitenciario",colspan:1},{description:"Imputados",colspan:3},{description:"Total PPL. 24h",colspan:3},{description:"Capacidad según diseño (Incluye 24 hrs y juveniles)",colspan:3},{description:"% Uso capacidad total",colspan:3},{description:"% Uso imputado",colspan:3}]),h=s([{rowReference:"establecimiento",description:""},{rowReference:"imputadoHombre",description:"Hombre"},{rowReference:"imputadoMujer",description:"Mujer"},{rowReference:"imputadoTotal",description:"Total"},{rowReference:"totalPplHombre",description:"Hombre"},{rowReference:"totalPplMujer",description:"Mujer"},{rowReference:"totalPplTotal",description:"Total"},{rowReference:"capacidadHombre",description:"Hombre"},{rowReference:"capacidadMujer",description:"Mujer"},{rowReference:"capacidadTotal",description:"Total"},{rowReference:"usoCapacidadHombre",description:"Hombre"},{rowReference:"usoCapacidadMujer",description:"Mujer"},{rowReference:"usoCapacidadTotal",description:"Total"},{rowReference:"usoImputadoHombre",description:"Hombre"},{rowReference:"usoImputadoMujer",description:"Mujer"},{rowReference:"usoImputadoTotal",description:"Total"}]),M=s([]),c=e=>e?Math.round(e*100)/100:0,n=e=>e<85?"class-verde":e>85&&e<99?"class-ambar":"class-rojo",V=e=>{const o=a.listadoCarceles.value.find(S=>S.id===e.carcelId),t=e.imputadoHombre+e.condenadoHombre+e.procesadoHombre+e.detenidoHombre,r=e.imputadoMujer+e.condenadoMujer+e.procesadoMujer+e.detenidoMujer,b=t+r,j=e.imputadoHombre+e.imputadoMujer,i=e.pplMaxMujer+e.pplMaxHombre,H=t&&e.pplMaxHombre?c(t*100/e.pplMaxHombre):0,w=r&&e.pplMaxMujer?c(r*100/e.pplMaxMujer):0,T=b&&i?c(b*100/i):0,g=e.imputadoHombre&&e.pplMaxHombre?c(e.imputadoHombre*100/e.pplMaxHombre):0,R=e.imputadoMujer&&e.pplMaxMujer?c(e.imputadoMujer*100/e.pplMaxMujer):0,v=j&&i?c(j*100/i):0;return{establecimiento:o.description,imputadoHombre:e.imputadoHombre,imputadoMujer:e.imputadoMujer,imputadoTotal:e.imputadoHombre+e.imputadoMujer,totalPplHombre:t,totalPplMujer:r,totalPplTotal:t+r,capacidadHombre:e.pplMaxHombre,capacidadMujer:e.pplMaxMujer,capacidadTotal:i,usoCapacidadHombre:{data:H+"%",class:n(H)},usoCapacidadMujer:{data:w+"%",class:n(w)},usoCapacidadTotal:{data:T+"%",class:n(T)},usoImputadoHombre:{data:g+"%",class:n(g)},usoImputadoMujer:{data:R+"%",class:n(R)},usoImputadoTotal:{data:v+"%",class:n(v)}}},D=async()=>{a.changeRegionSelected(p.value),await f(),await _()},$=async e=>{if(!a.listadoRegiones.length>0){let o=await k();m.value=o,a.setRegionesList(o)}},f=async()=>{const e={regionId:a.regionSelected.id};let o=await E(e);a.setCarcelesList(o)},_=async()=>{var e;try{if((e=a==null?void 0:a.regionSelected)!=null&&e.id){const o={year:2022,month:12,regionId:a.regionSelected.id,embedPopulation:!0};await f();let t=await N(o);M.value=t.items.map(r=>V(r))}}catch(o){console.log(o)}};return B(async()=>{p.value=a.regionSelected,await $(),await _(),l.value=!0}),(e,o)=>(x(),C(L,null,{default:I(()=>[u(F,{title:y.value,"section-value":Y},null,8,["title"]),d("div",K,[l.value?(x(),C(U,{key:0,options:m.value,modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=t=>p.value=t)},null,8,["options","modelValue"])):A("",!0),u(z,{title:"Buscar",onExecuteAction:o[1]||(o[1]=t=>D())})]),d("div",O,[u(q,{class:"card-information"},{default:I(()=>[Q,W]),_:1})]),d("div",X,[u(G,{"parent-columns":P.value,columns:h.value,rows:M.value},null,8,["parent-columns","columns","rows"])])]),_:1}))}};export{ce as default};
